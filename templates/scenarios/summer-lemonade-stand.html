<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒØ´Ùƒ Ø§Ù„Ù„ÙŠÙ…ÙˆÙ†Ø§Ø¯Ø© - Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            padding: 30px;
            text-align: center;
            color: white;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            text-decoration: none;
            transition: all 0.3s;
        }

        .back-button:hover {
            background: rgba(255,255,255,0.3);
        }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 3px solid #e9ecef;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .stat-card .icon {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card .label {
            font-size: 0.9em;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .stat-card .value {
            font-size: 1.5em;
            font-weight: bold;
            color: #495057;
        }

        .game-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            padding: 20px;
        }

        .main-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .weather-card {
            background: linear-gradient(135deg, #FDB99B 0%, #F8961E 100%);
            padding: 20px;
            border-radius: 15px;
            color: white;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .weather-icon {
            font-size: 3em;
        }

        .weather-info h3 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #495057;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .supply-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .supply-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .supply-icon {
            font-size: 2em;
        }

        .supply-details h4 {
            font-size: 1.1em;
            color: #495057;
            margin-bottom: 5px;
        }

        .supply-price {
            font-size: 0.9em;
            color: #6c757d;
        }

        .supply-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        .btn-secondary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quantity {
            font-size: 1.2em;
            font-weight: bold;
            min-width: 40px;
            text-align: center;
        }

        .price-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .price-input {
            width: 100%;
            padding: 12px;
            font-size: 1.2em;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
        }

        .price-recommendation {
            text-align: center;
            margin-top: 10px;
            color: #6c757d;
            font-size: 0.9em;
        }

        .recipe-section {
            margin-top: 15px;
        }

        .recipe-slider {
            margin: 20px 0;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e9ecef;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .recipe-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .recipe-status {
            text-align: center;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 10px;
            padding: 10px;
            background: #e7f3ff;
            border-radius: 8px;
            color: #0066cc;
        }

        .cost-summary {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .cost-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }

        .cost-row:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 1.1em;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            flex: 1;
            padding: 15px;
            font-size: 1.2em;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-reset {
            background: #dc3545;
            color: white;
            padding: 15px 30px;
            font-size: 1.1em;
        }

        .btn-reset:hover {
            background: #c82333;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .event-card {
            background: #fff3cd;
            padding: 20px;
            border-radius: 15px;
            border-right: 5px solid #ffc107;
        }

        .event-card h3 {
            color: #856404;
            margin-bottom: 10px;
        }

        .tips-card {
            background: #d1ecf1;
            padding: 20px;
            border-radius: 15px;
        }

        .tips-card h3 {
            color: #0c5460;
            margin-bottom: 15px;
        }

        .tip-item {
            background: white;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .results-panel {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .sales-log {
            max-height: 300px;
            overflow-y: auto;
        }

        .sales-entry {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            animation: modalSlide 0.3s ease-out;
        }

        @keyframes modalSlide {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content h2 {
            font-size: 2em;
            margin-bottom: 20px;
            color: #495057;
        }

        .result-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .inventory-item {
            background: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .game-content {
                grid-template-columns: 1fr;
            }

            .stats-bar {
                grid-template-columns: repeat(2, 1fr);
            }

            .header h1 {
                font-size: 1.8em;
            }

            .back-button {
                position: static;
                transform: none;
                display: inline-block;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="#" class="back-button">ğŸ‹ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ â†’</a>
            <h1>ÙƒØ´Ùƒ Ø§Ù„Ù„ÙŠÙ…ÙˆÙ†Ø§Ø¯Ø©</h1>
        </div>

        <div class="stats-bar">
            <div class="stat-card">
                <div class="icon">ğŸ’µ</div>
                <div class="label">Ø§Ù„Ù†Ù‚ÙˆØ¯</div>
                <div class="value" id="money">$50.00</div>
            </div>
            <div class="stat-card">
                <div class="icon">ğŸ“…</div>
                <div class="label">Ø§Ù„ÙŠÙˆÙ…</div>
                <div class="value" id="day">1</div>
            </div>
            <div class="stat-card">
                <div class="icon">ğŸ’°</div>
                <div class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø¨Ø­</div>
                <div class="value" id="totalProfit">$0.00</div>
            </div>
            <div class="stat-card">
                <div class="icon">ğŸ¥¤</div>
                <div class="label">Ø§Ù„Ø£ÙƒÙˆØ§Ø¨ Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©</div>
                <div class="value" id="cupsSold">0</div>
            </div>
            <div class="stat-card">
                <div class="icon">â­</div>
                <div class="label">Ø§Ù„Ø³Ù…Ø¹Ø©</div>
                <div class="value" id="reputation">5.0</div>
            </div>
        </div>

        <div class="game-content">
            <div class="main-panel">
                <div class="weather-card">
                    <div class="weather-icon" id="weatherIcon">â˜€ï¸</div>
                    <div class="weather-info">
                        <h3 id="weatherDesc">Ù…Ø´Ù…Ø³ ÙˆØ­Ø§Ø±</h3>
                        <p id="weatherTemp">29Â°Ù…</p>
                    </div>
                </div>

                <div class="section">
                    <h2>ğŸ“¦ Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª</h2>
                    
                    <div class="supply-item">
                        <div class="supply-info">
                            <div class="supply-icon">ğŸ‹</div>
                            <div class="supply-details">
                                <h4>Ø§Ù„Ù„ÙŠÙ…ÙˆÙ†</h4>
                                <p class="supply-price">$0.50 Ù„ÙƒÙ„ 10</p>
                            </div>
                        </div>
                        <div class="supply-controls">
                            <button class="btn btn-secondary" onclick="changeSupply('lemons', -1)">-</button>
                            <span class="quantity" id="lemons">0</span>
                            <button class="btn btn-secondary" onclick="changeSupply('lemons', 1)">+</button>
                        </div>
                    </div>

                    <div class="supply-item">
                        <div class="supply-info">
                            <div class="supply-icon">ğŸ§‚</div>
                            <div class="supply-details">
                                <h4>Ø§Ù„Ø³ÙƒØ±</h4>
                                <p class="supply-price">$0.30 Ù„ÙƒÙ„ 10</p>
                            </div>
                        </div>
                        <div class="supply-controls">
                            <button class="btn btn-secondary" onclick="changeSupply('sugar', -1)">-</button>
                            <span class="quantity" id="sugar">0</span>
                            <button class="btn btn-secondary" onclick="changeSupply('sugar', 1)">+</button>
                        </div>
                    </div>

                    <div class="supply-item">
                        <div class="supply-info">
                            <div class="supply-icon">ğŸ¥¤</div>
                            <div class="supply-details">
                                <h4>Ø§Ù„Ø£ÙƒÙˆØ§Ø¨</h4>
                                <p class="supply-price">$0.20 Ù„ÙƒÙ„ 10</p>
                            </div>
                        </div>
                        <div class="supply-controls">
                            <button class="btn btn-secondary" onclick="changeSupply('cups', -1)">-</button>
                            <span class="quantity" id="cups">0</span>
                            <button class="btn btn-secondary" onclick="changeSupply('cups', 1)">+</button>
                        </div>
                    </div>

                    <div class="supply-item">
                        <div class="supply-info">
                            <div class="supply-icon">ğŸ§Š</div>
                            <div class="supply-details">
                                <h4>Ø§Ù„Ø«Ù„Ø¬</h4>
                                <p class="supply-price">$0.10 Ù„ÙƒÙ„ 10</p>
                            </div>
                        </div>
                        <div class="supply-controls">
                            <button class="btn btn-secondary" onclick="changeSupply('ice', -1)">-</button>
                            <span class="quantity" id="ice">0</span>
                            <button class="btn btn-secondary" onclick="changeSupply('ice', 1)">+</button>
                        </div>
                    </div>

                    <div class="price-section">
                        <h3>ğŸ’µ Ø­Ø¯Ø¯ Ø§Ù„Ø³Ø¹Ø±</h3>
                        <input type="number" class="price-input" id="priceInput" value="1.00" min="0.25" max="5.00" step="0.25">
                        <p class="price-recommendation">Ù…ÙˆØµÙ‰ Ø¨Ù‡: $0.75 - $1.25</p>
                    </div>

                    <div class="recipe-section">
                        <h3>ğŸ‘¨â€ğŸ³ Ø¬ÙˆØ¯Ø© Ø§Ù„ÙˆØµÙØ©</h3>
                        <p style="text-align: center; margin: 10px 0;">Ù†Ø³Ø¨Ø© Ø§Ù„Ù„ÙŠÙ…ÙˆÙ† Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙƒØ±</p>
                        <input type="range" class="slider" id="recipeSlider" min="0" max="100" value="50" oninput="updateRecipe()">
                        <div class="recipe-labels">
                            <span>ğŸ‹ Ø­Ø§Ù…Ø¶</span>
                            <span>Ø­Ù„Ùˆ ğŸ§‚</span>
                        </div>
                        <div class="recipe-status" id="recipeStatus">Ù…ØªÙˆØ§Ø²Ù†</div>
                    </div>

                    <div class="cost-summary">
                        <div class="cost-row">
                            <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª</span>
                            <span id="totalCost">$0.00</span>
                        </div>
                        <div class="cost-row">
                            <span>Ø§Ù„Ù†Ù‚ÙˆØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</span>
                            <span id="remainingMoney">$50.00</span>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-reset" onclick="resetDay()">â†º Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
                        <button class="btn btn-primary" onclick="startSelling()">â–¶ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨ÙŠØ¹!</button>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="event-card">
                    <h3>ğŸ“¢ Ø­Ø¯Ø« Ø§Ù„ÙŠÙˆÙ…</h3>
                    <h4 id="eventTitle">Ø·Ù‚Ø³ Ù…Ø«Ø§Ù„ÙŠ!</h4>
                    <p id="eventDesc">Ø¥Ù†Ù‡ ÙŠÙˆÙ… Ù…Ø´Ù…Ø³ Ø¬Ù…ÙŠÙ„. Ø§Ù„Ù†Ø§Ø³ ÙŠØ¨Ø­Ø«ÙˆÙ† Ø¹Ù† Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ù…Ù†Ø¹Ø´Ø©!</p>
                </div>

                <div class="tips-card">
                    <h3>ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ø§Ø­ØªØ±Ø§ÙÙŠØ©</h3>
                    <div class="tip-item">â˜€ï¸ Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø­Ø§Ø± ÙŠØ¹Ù†ÙŠ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†! Ø§Ø´ØªØ± Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª.</div>
                    <div class="tip-item">ğŸ’° Ù„Ø§ ØªØ¨Ø§Ù„Øº ÙÙŠ Ø§Ù„ØªØ³Ø¹ÙŠØ±! Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª.</div>
                    <div class="tip-item">â­ Ø§Ù„ÙˆØµÙØ§Øª Ø§Ù„Ø¬ÙŠØ¯Ø© ØªØ¨Ù†ÙŠ Ø§Ù„Ø³Ù…Ø¹Ø© ÙˆØªØ¬Ù„Ø¨ Ø§Ù„Ø²Ø¨Ø§Ø¦Ù† Ø§Ù„Ù…ØªÙƒØ±Ø±ÙŠÙ†.</div>
                    <div class="tip-item">ğŸ“Š ØªØ§Ø¨Ø¹ Ø£Ø¯Ø§Ø¡Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØªÙƒ.</div>
                </div>

                <div class="section">
                    <h2>ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</h2>
                    <div class="inventory-grid" id="inventoryDisplay">
                        <p style="grid-column: 1/-1; text-align: center; color: #6c757d;">Ø§Ø´ØªØ± Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ù„Ø±Ø¤ÙŠØ© Ù…Ø®Ø²ÙˆÙ†Ùƒ</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h2>ğŸ‰ Ø§Ù„ÙŠÙˆÙ… Ù…ÙƒØªÙ…Ù„!</h2>
            <div class="result-stat">
                <span>Ø§Ù„Ø£ÙƒÙˆØ§Ø¨ Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©</span>
                <strong id="resultCups">0</strong>
            </div>
            <div class="result-stat">
                <span>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</span>
                <strong id="resultRevenue">$0.00</strong>
            </div>
            <div class="result-stat">
                <span>Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</span>
                <strong id="resultExpenses">$0.00</strong>
            </div>
            <div class="result-stat">
                <span>Ø§Ù„Ø±Ø¨Ø­</span>
                <strong id="resultProfit" style="color: #28a745;">$0.00</strong>
            </div>
            <div class="action-buttons" style="margin-top: 20px;">
                <button class="btn btn-reset" onclick="endGame()">ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
                <button class="btn btn-primary" onclick="nextDay()">â† Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>
        </div>
    </div>

    <script>
        const gameState = {
            money: 50,
            day: 1,
            totalProfit: 0,
            totalCupsSold: 0,
            reputation: 5.0,
            supplies: {
                lemons: 0,
                sugar: 0,
                cups: 0,
                ice: 0
            },
            inventory: {
                lemons: 0,
                sugar: 0,
                cups: 0,
                ice: 0
            },
            price: 1.00,
            recipe: 50,
            weather: null
        };

        const supplyPrices = {
            lemons: 0.50,
            sugar: 0.30,
            cups: 0.20,
            ice: 0.10
        };

        const weatherTypes = [
            { icon: 'â˜€ï¸', desc: 'Ù…Ø´Ù…Ø³ ÙˆØ­Ø§Ø±', temp: '29Â°Ù…', customerMultiplier: 1.5 },
            { icon: 'â›…', desc: 'ØºØ§Ø¦Ù… Ø¬Ø²Ø¦ÙŠØ§Ù‹', temp: '24Â°Ù…', customerMultiplier: 1.0 },
            { icon: 'ğŸŒ§ï¸', desc: 'Ù…Ù…Ø·Ø±', temp: '18Â°Ù…', customerMultiplier: 0.5 },
            { icon: 'ğŸŒ¤ï¸', desc: 'Ù…Ø´Ù…Ø³ ÙˆÙ„Ø·ÙŠÙ', temp: '26Â°Ù…', customerMultiplier: 1.2 }
        ];

        function initGame() {
            setRandomWeather();
            updateDisplay();
        }

        function setRandomWeather() {
            gameState.weather = weatherTypes[Math.floor(Math.random() * weatherTypes.length)];
            document.getElementById('weatherIcon').textContent = gameState.weather.icon;
            document.getElementById('weatherDesc').textContent = gameState.weather.desc;
            document.getElementById('weatherTemp').textContent = gameState.weather.temp;
        }

        function changeSupply(type, amount) {
            const newAmount = gameState.supplies[type] + amount;
            if (newAmount >= 0) {
                const costDiff = amount * supplyPrices[type];
                if (gameState.money >= costDiff || amount < 0) {
                    gameState.supplies[type] = newAmount;
                    updateDisplay();
                }
            }
        }

        function updateRecipe() {
            const value = document.getElementById('recipeSlider').value;
            gameState.recipe = parseInt(value);
            
            let status = '';
            if (value < 30) status = 'Ø­Ø§Ù…Ø¶ Ø¬Ø¯Ø§Ù‹ ğŸ‹';
            else if (value < 45) status = 'Ø­Ø§Ù…Ø¶ Ù‚Ù„ÙŠÙ„Ø§Ù‹ ğŸ‹';
            else if (value < 55) status = 'Ù…ØªÙˆØ§Ø²Ù† âœ¨';
            else if (value < 70) status = 'Ø­Ù„Ùˆ Ù‚Ù„ÙŠÙ„Ø§Ù‹ ğŸ§‚';
            else status = 'Ø­Ù„Ùˆ Ø¬Ø¯Ø§Ù‹ ğŸ§‚';
            
            document.getElementById('recipeStatus').textContent = status;
        }

        function calculateTotalCost() {
            let total = 0;
            for (let type in gameState.supplies) {
                total += gameState.supplies[type] * supplyPrices[type];
            }
            return total;
        }

        function updateDisplay() {
            document.getElementById('money').textContent = '$' + gameState.money.toFixed(2);
            document.getElementById('day').textContent = gameState.day;
            document.getElementById('totalProfit').textContent = '$' + gameState.totalProfit.toFixed(2);
            document.getElementById('cupsSold').textContent = gameState.totalCupsSold;
            document.getElementById('reputation').textContent = gameState.reputation.toFixed(1);

            for (let type in gameState.supplies) {
                document.getElementById(type).textContent = gameState.supplies[type];
            }

            const totalCost = calculateTotalCost();
            document.getElementById('totalCost').textContent = '$' + totalCost.toFixed(2);
            document.getElementById('remainingMoney').textContent = '$' + (gameState.money - totalCost).toFixed(2);

            updateInventoryDisplay();
        }

        function updateInventoryDisplay() {
            const container = document.getElementById('inventoryDisplay');
            const hasInventory = Object.values(gameState.inventory).some(v => v > 0);
            
            if (!hasInventory) {
                container.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: #6c757d;">Ø§Ø´ØªØ± Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ù„Ø±Ø¤ÙŠØ© Ù…Ø®Ø²ÙˆÙ†Ùƒ</p>';
                return;
            }

            const icons = { lemons: 'ğŸ‹', sugar: 'ğŸ§‚', cups: 'ğŸ¥¤', ice: 'ğŸ§Š' };
            const names = { lemons: 'Ù„ÙŠÙ…ÙˆÙ†', sugar: 'Ø³ÙƒØ±', cups: 'Ø£ÙƒÙˆØ§Ø¨', ice: 'Ø«Ù„Ø¬' };
            
            container.innerHTML = '';
            for (let type in gameState.inventory) {
                if (gameState.inventory[type] > 0) {
                    const div = document.createElement('div');
                    div.className = 'inventory-item';
                    div.innerHTML = `
                        <div style="font-size: 1.5em;">${icons[type]}</div>
                        <div style="font-size: 0.9em; color: #6c757d;">${names[type]}</div>
                        <div style="font-weight: bold;">${gameState.inventory[type]}</div>
                    `;
                    container.appendChild(div);
                }
            }
        }

        function startSelling() {
            const totalCost = calculateTotalCost();
            
            if (totalCost > gameState.money) {
                alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù†Ù‚ÙˆØ¯ ÙƒØ§ÙÙŠØ©!');
                return;
            }

            if (gameState.supplies.cups === 0) {
                alert('ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø´Ø±Ø§Ø¡ Ø£ÙƒÙˆØ§Ø¨ Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }

            // Deduct money and add to inventory
            gameState.money -= totalCost;
            for (let type in gameState.supplies) {
                gameState.inventory[type] += gameState.supplies[type];
                gameState.supplies[type] = 0;
            }

            // Simulate selling
            simulateSales();
        }

        function simulateSales() {
            const price = parseFloat(document.getElementById('priceInput').value);
            const maxCups = Math.min(
                gameState.inventory.cups,
                gameState.inventory.lemons,
                gameState.inventory.sugar,
                gameState.inventory.ice
            );

            if (maxCups === 0) {
                alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª ÙƒØ§ÙÙŠØ© Ù„Ù„Ø¨ÙŠØ¹!');
                return;
            }

            // Calculate demand based on price, weather, and recipe
            let baseCustomers = 20;
            baseCustomers *= gameState.weather.customerMultiplier;
            
            // Price affects demand
            if (price < 0.75) baseCustomers *= 1.3;
            else if (price > 1.25) baseCustomers *= 0.7;
            else if (price > 1.75) baseCustomers *= 0.4;

            // Recipe affects reputation
            let recipeQuality = 1.0;
            if (gameState.recipe >= 45 && gameState.recipe <= 55) {
                recipeQuality = 1.2; // Perfect recipe
            } else if (gameState.recipe < 30 || gameState.recipe > 70) {
                recipeQuality = 0.8; // Poor recipe
            }

            baseCustomers *= recipeQuality;
            baseCustomers *= (gameState.reputation / 5.0);

            const cupsSold = Math.min(Math.floor(baseCustomers + Math.random() * 10), maxCups);
            const revenue = cupsSold * price;
            const profit = revenue - (cupsSold * 0.15); // 15 cents cost per cup

            // Update inventory
            gameState.inventory.cups -= cupsSold;
            gameState.inventory.lemons -= cupsSold;
            gameState.inventory.sugar -= cupsSold;
            gameState.inventory.ice -= cupsSold;

            // Update stats
            gameState.money += revenue;
            gameState.totalCupsSold += cupsSold;
            gameState.totalProfit += profit;

            // Update reputation
            if (recipeQuality > 1.1) {
                gameState.reputation = Math.min(5.0, gameState.reputation + 0.1);
            } else if (recipeQuality < 0.9) {
                gameState.reputation = Math.max(1.0, gameState.reputation - 0.1);
            }

            showResults(cupsSold, revenue, profit);
        }

        function showResults(cups, revenue, profit) {
            document.getElementById('resultCups').textContent = cups;
            document.getElementById('resultRevenue').textContent = '$' + revenue.toFixed(2);
            document.getElementById('resultExpenses').textContent = '$' + (revenue - profit).toFixed(2);
            document.getElementById('resultProfit').textContent = '$' + profit.toFixed(2);
            
            const profitElement = document.getElementById('resultProfit');
            profitElement.style.color = profit >= 0 ? '#28a745' : '#dc3545';
            
            document.getElementById('resultModal').classList.add('active');
        }

        function nextDay() {
            gameState.day++;
            setRandomWeather();
            document.getElementById('resultModal').classList.remove('active');
            updateDisplay();
        }

        function resetDay() {
            for (let type in gameState.supplies) {
                gameState.supplies[type] = 0;
            }
            document.getElementById('priceInput').value = '1.00';
            document.getElementById('recipeSlider').value = '50';
            updateRecipe();
            updateDisplay();
        }

        function endGame() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©ØŸ')) {
                alert(`Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù†ØªÙ‡Øª!\n\nØ§Ù„Ø£ÙŠØ§Ù…: ${gameState.day}\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø¨Ø­: $${gameState.totalProfit.toFixed(2)}\nØ§Ù„Ø£ÙƒÙˆØ§Ø¨ Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©: ${gameState.totalCupsSold}\nØ§Ù„Ø³Ù…Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${gameState.reputation.toFixed(1)}`);
                location.reload();
            }
        }

        // Initialize game on load
        initGame();
    </script>
</body>
</html>
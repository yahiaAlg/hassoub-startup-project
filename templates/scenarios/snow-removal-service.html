<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø®Ø¯Ù…Ø© Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø«Ù„ÙˆØ¬ - Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .back-link {
            display: inline-block;
            color: white;
            text-decoration: none;
            margin-bottom: 15px;
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            transition: background 0.3s;
        }

        .back-link:hover {
            background: rgba(255,255,255,0.3);
        }

        .progress-steps {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .step {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .step.active {
            background: white;
            color: #667eea;
            font-weight: bold;
        }

        .step.completed {
            background: rgba(255,255,255,0.4);
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            padding: 30px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-card .icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .stat-card .label {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .stat-card .value {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
        }

        .content {
            padding: 30px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .tip-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 8px;
        }

        .tip-box strong {
            color: #856404;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .option-card {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .option-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }

        .option-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .option-card .price {
            color: #667eea;
            font-size: 1.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .option-card ul {
            list-style: none;
            padding: 0;
        }

        .option-card li {
            padding: 5px 0;
            color: #555;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        button {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .input-group {
            margin: 20px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .input-group input[type="number"],
        .input-group input[type="range"] {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
        }

        .slider-value {
            text-align: center;
            font-size: 1.2em;
            color: #667eea;
            font-weight: bold;
            margin-top: 10px;
        }

        .jobs-container {
            display: grid;
            gap: 15px;
            margin: 20px 0;
            min-height: 100px;
        }

        .job-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .job-info h4 {
            color: #333;
            margin-bottom: 8px;
        }

        .job-details {
            color: #666;
            font-size: 0.9em;
        }

        .job-action button {
            padding: 10px 25px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .job-action button:hover {
            background: #218838;
            transform: scale(1.05);
        }

        .job-action button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .fatigue-bar {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .fatigue-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #ffc107, #dc3545);
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlide 0.3s ease-out;
        }

        @keyframes modalSlide {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 20px 20px 0 0;
        }

        .modal-header .icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .modal-body {
            padding: 30px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .result-item .label {
            font-weight: bold;
            color: #555;
        }

        .result-item .value {
            font-size: 1.2em;
            color: #667eea;
            font-weight: bold;
        }

        .result-item.positive .value {
            color: #28a745;
        }

        .result-item.negative .value {
            color: #dc3545;
        }

        .modal-footer {
            padding: 20px 30px;
            text-align: center;
            border-top: 1px solid #e0e0e0;
        }

        .pricing-model {
            margin: 20px 0;
        }

        .radio-option {
            margin: 10px 0;
        }

        .radio-option input[type="radio"] {
            margin-left: 10px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.5em;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .dashboard {
                grid-template-columns: repeat(2, 1fr);
            }

            .job-card {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="{% url "scenarios:scenario_list" %}" class="back-link">â„ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ â†’</a>
            <h1>â›„ Ø®Ø¯Ù…Ø© Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø«Ù„ÙˆØ¬</h1>
            <p>8 Ø£Ø³Ø§Ø¨ÙŠØ¹ Ù…Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø´ØªÙˆÙŠØ© ÙˆØ§Ù„Ø£Ø±Ø¨Ø§Ø­!</p>
            <div class="progress-steps">
                <div class="step" data-step="1">1ï¸âƒ£ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª</div>
                <div class="step" data-step="2">2ï¸âƒ£ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</div>
                <div class="step" data-step="3">3ï¸âƒ£ Ø§Ù„ØªØ³Ø¹ÙŠØ±</div>
                <div class="step" data-step="4">4ï¸âƒ£ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¯Ù…Ø©</div>
                <div class="step" data-step="5">5ï¸âƒ£ Ø§Ù„ØªØ³ÙˆÙŠÙ‚</div>
                <div class="step" data-step="6">6ï¸âƒ£ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©</div>
            </div>
        </div>

        <div class="dashboard">
            <div class="stat-card">
                <div class="icon">ğŸ’µ</div>
                <div class="label">Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„</div>
                <div class="value" id="capital">$120.00</div>
            </div>
            <div class="stat-card">
                <div class="icon">ğŸ“…</div>
                <div class="label">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</div>
                <div class="value" id="week">Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</div>
            </div>
            <div class="stat-card">
                <div class="icon">ğŸ </div>
                <div class="label">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
                <div class="value" id="customers">0</div>
            </div>
            <div class="stat-card">
                <div class="icon">â›„</div>
                <div class="label">ÙˆØ¸Ø§Ø¦Ù Ù…ÙƒØªÙ…Ù„Ø©</div>
                <div class="value" id="jobsCompleted">0</div>
            </div>
            <div class="stat-card">
                <div class="icon">ğŸ’°</div>
                <div class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø¨Ø­</div>
                <div class="value" id="totalProfit">$0.00</div>
            </div>
            <div class="stat-card">
                <div class="icon">ğŸ˜Š</div>
                <div class="label">Ø§Ù„Ø±Ø¶Ø§</div>
                <div class="value" id="satisfaction">0%</div>
            </div>
        </div>

        <div class="content">
            <!-- Section 1: Equipment -->
            <div class="section active" id="section1">
                <div class="tip-box">
                    <strong>ğŸ’¡ Ù†ØµÙŠØ­Ø©:</strong> Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø£ÙØ¶Ù„ ØªØ²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„Ù‚Ø¯Ø±Ø©ØŒ Ù„ÙƒÙ†Ù‡Ø§ ØªÙƒÙ„Ù Ø£ÙƒØ«Ø± Ù…Ù‚Ø¯Ù…Ù‹Ø§ ÙˆÙ„Ù„ØªØ´ØºÙŠÙ„!
                </div>
                <h2 style="margin-bottom: 20px;">ğŸ› ï¸ Ø§Ø®ØªØ± Ù…Ø¹Ø¯Ø§ØªÙƒ</h2>
                <div class="options-grid">
                    <div class="option-card" data-equipment="basic">
                        <h3>ğŸ§¹ Ù…Ø¹Ø¯Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©</h3>
                        <div class="price">$20</div>
                        <ul>
                            <li>â±ï¸ 45 Ø¯Ù‚ÙŠÙ‚Ø© Ù„ÙƒÙ„ Ù…Ù…Ø±</li>
                            <li>ğŸ  Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØµØºÙŠØ±Ø© ÙÙ‚Ø·</li>
                            <li>ğŸ’ª Ø¹Ù…Ù„ Ù…ÙƒØ«Ù Ø¬Ø³Ø¯ÙŠÙ‹Ø§</li>
                            <li>ğŸ’µ Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙƒØ§Ù„ÙŠÙ ØªØ´ØºÙŠÙ„</li>
                            <li>âš ï¸ Ø®Ø·Ø±: Ø§Ù„Ø¥Ø±Ù‡Ø§Ù‚ØŒ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø¨Ø·ÙŠØ¦Ø©</li>
                        </ul>
                    </div>
                    <div class="option-card" data-equipment="standard">
                        <h3>âš’ï¸ Ù…Ø¹Ø¯Ø§Øª Ù‚ÙŠØ§Ø³ÙŠØ©</h3>
                        <div class="price">$60</div>
                        <ul>
                            <li>â±ï¸ 30 Ø¯Ù‚ÙŠÙ‚Ø© Ù„ÙƒÙ„ Ù…Ù…Ø±</li>
                            <li>ğŸ  ÙˆØ¸Ø§Ø¦Ù Ù…ØªÙˆØ³Ø·Ø© Ù…Ù…ÙƒÙ†Ø©</li>
                            <li>ğŸ§‚ Ù…Ù„Ø­ Ø¥Ø°Ø§Ø¨Ø©: $2 Ù„ÙƒÙ„ ÙˆØ¸ÙŠÙØ©</li>
                            <li>âœ… ÙƒÙØ§Ø¡Ø© Ø¬ÙŠØ¯Ø©</li>
                        </ul>
                    </div>
                    <div class="option-card" data-equipment="professional">
                        <h3>ğŸšœ Ù…Ø¹Ø¯Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ©</h3>
                        <div class="price">$110</div>
                        <ul>
                            <li>â±ï¸ 12 Ø¯Ù‚ÙŠÙ‚Ø© Ù„ÙƒÙ„ Ù…Ù…Ø±</li>
                            <li>ğŸ¢ ÙˆØ¸Ø§Ø¦Ù ÙƒØ¨ÙŠØ±Ø© (Ù…ÙˆØ§Ù‚Ù)</li>
                            <li>â›½ ÙˆÙ‚ÙˆØ¯: $3 Ù„ÙƒÙ„ ÙˆØ¸ÙŠÙØ©</li>
                            <li>ğŸ”§ ØµÙŠØ§Ù†Ø©: $5 Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ‹Ø§</li>
                            <li>âš¡ ÙƒÙØ§Ø¡Ø© Ø¹Ø§Ù„ÙŠØ©</li>
                        </ul>
                    </div>
                    <div class="option-card" data-equipment="partnership">
                        <h3>ğŸ¤ Ø´Ø±Ø§ÙƒØ© Ø§Ù„Ø­ÙŠ</h3>
                        <div class="price">$40</div>
                        <ul>
                            <li>â±ï¸ 15 Ø¯Ù‚ÙŠÙ‚Ø© Ù„ÙƒÙ„ Ù…Ù…Ø± (Ù…Ù†Ø³Ù‚)</li>
                            <li>ğŸ‘¥ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¹Ù…Ù„ = Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù‚Ø¯Ø±Ø©</li>
                            <li>ğŸ’° ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ 50/50</li>
                            <li>ğŸ“… ÙŠÙ„Ø²Ù… ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©</li>
                        </ul>
                    </div>
                </div>
                <div class="buttons">
                    <button class="btn-primary" onclick="nextSection()">Ø§Ù„ØªØ§Ù„ÙŠ â†</button>
                </div>
            </div>

            <!-- Section 2: Area -->
            <div class="section" id="section2">
                <div class="tip-box">
                    <strong>ğŸ’¡ Ù†ØµÙŠØ­Ø©:</strong> Ù…Ù†Ø·Ù‚Ø© Ø£ÙƒØ¨Ø± = Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù„ÙƒÙ† Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† ÙˆÙ‚Øª Ø§Ù„Ø³ÙØ±!
                </div>
                <h2 style="margin-bottom: 20px;">ğŸ—ºï¸ Ø§Ø®ØªØ± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø®Ø¯Ù…Ø©</h2>
                <div class="options-grid">
                    <div class="option-card" data-area="street">
                        <h3>ğŸ˜ï¸ Ø´Ø§Ø±Ø¹Ùƒ ÙÙ‚Ø·</h3>
                        <ul>
                            <li>ğŸ  15-20 Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„</li>
                            <li>ğŸš¶ Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ø´ÙŠ</li>
                            <li>â±ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆÙ‚Øª Ø³ÙØ±</li>
                            <li>âœ… Ø§Ù„Ø¬ÙŠØ±Ø§Ù† ÙŠØ¹Ø±ÙÙˆÙ†Ùƒ ÙˆÙŠØ«Ù‚ÙˆÙ† Ø¨Ùƒ</li>
                        </ul>
                    </div>
                    <div class="option-card" data-area="neighborhood">
                        <h3>ğŸ˜ï¸ğŸ˜ï¸ Ø§Ù„Ø­ÙŠ (5 Ù…Ø±Ø¨Ø¹Ø§Øª)</h3>
                        <ul>
                            <li>ğŸ  50-80 Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„</li>
                            <li>ğŸš² 5-10 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</li>
                            <li>ğŸ—ºï¸ ÙŠØ¬Ø¨ Ø§Ù„ØªØ®Ø·ÙŠØ· Ù„Ù„Ø·Ø±Ù‚ Ø§Ù„ÙØ¹Ø§Ù„Ø©</li>
                            <li>ğŸ“ˆ Ø³ÙˆÙ‚ Ø£ÙƒØ¨Ø±</li>
                        </ul>
                    </div>
                    <div class="option-card" data-area="extended">
                        <h3>ğŸŒ† Ù…Ù†Ø·Ù‚Ø© Ù…Ù…ØªØ¯Ø© (15 Ø¯Ù‚ÙŠÙ‚Ø©)</h3>
                        <ul>
                            <li>ğŸ  120-150 Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„</li>
                            <li>ğŸš— 15-20 Ø¯Ù‚ÙŠÙ‚Ø© Ø¨ÙŠÙ† Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</li>
                            <li>â„ï¸ Ø§Ù„Ø³ÙØ± ØµØ¹Ø¨ ÙÙŠ Ø§Ù„Ø«Ù„ÙˆØ¬ Ø§Ù„ÙƒØ«ÙŠÙØ©</li>
                            <li>ğŸ“Š Ø£Ù‚ØµÙ‰ Ø­Ø¬Ù… Ù„Ù„Ø³ÙˆÙ‚</li>
                            <li>âš ï¸ Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªÙˆØµÙŠÙ„ Ù…Ù† Ø§Ù„ÙˆØ§Ù„Ø¯ÙŠÙ†</li>
                        </ul>
                    </div>
                </div>
                <div class="buttons">
                    <button class="btn-secondary" onclick="prevSection()">â†’ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button class="btn-primary" onclick="nextSection()">Ø§Ù„ØªØ§Ù„ÙŠ â†</button>
                </div>
            </div>

            <!-- Section 3: Pricing -->
            <div class="section" id="section3">
                <div class="tip-box">
                    <strong>ğŸ’¡ Ù†ØµÙŠØ­Ø©:</strong> Ø§Ù„Ø¹Ù‚ÙˆØ¯ ØªØ¶Ù…Ù† Ø§Ù„Ø¯Ø®Ù„ Ù„ÙƒÙ† ØªÙ†Ù‚Ù„ Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø·Ù‚Ø³ Ø¥Ù„ÙŠÙƒ!
                </div>
                <h2 style="margin-bottom: 20px;">ğŸ’µ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±</h2>
                
                <div class="input-group">
                    <label>Ø§Ø®ØªØ± Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¹ÙŠØ±</label>
                    <div class="pricing-model">
                        <div class="radio-option">
                            <label>
                                <input type="radio" name="pricingModel" value="perJob" checked>
                                Ø§Ù„Ø¯ÙØ¹ Ù„ÙƒÙ„ ÙˆØ¸ÙŠÙØ© - ğŸ’µ Ø§Ù„Ø´Ø­Ù† Ù„ÙƒÙ„ ØªØ³Ø§Ù‚Ø· Ø«Ù„ÙˆØ¬ (ØªÙƒØ³Ø¨ ÙÙ‚Ø· Ø¹Ù†Ø¯Ù…Ø§ ØªØªØ³Ø§Ù‚Ø· Ø§Ù„Ø«Ù„ÙˆØ¬)
                            </label>
                        </div>
                        <div class="radio-option">
                            <label>
                                <input type="radio" name="pricingModel" value="contract">
                                Ø¹Ù‚Ø¯ Ø§Ù„Ù…ÙˆØ³Ù… - ğŸ“‹ Ø³Ø¹Ø± Ø«Ø§Ø¨Øª Ù„Ù„Ø´ØªØ§Ø¡ Ø¨Ø£ÙƒÙ…Ù„Ù‡ (Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…Ø³Ø¨Ù‚ØŒ Ø¯Ø®Ù„ Ù…ØªÙˆÙ‚Ø¹)
                            </label>
                        </div>
                        <div class="radio-option">
                            <label>
                                <input type="radio" name="pricingModel" value="mixed">
                                Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…Ø®ØªÙ„Ø·Ø© - âš–ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ø¹Ù‚ÙˆØ¯ + Ø¨Ø¹Ø¶ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù (ØªÙˆØ§Ø²Ù† Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆØ§Ù„ÙØ±ØµØ©)
                            </label>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <h3>Ø­Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø­Ø³Ø¨ Ø¹Ù…Ù‚ Ø§Ù„Ø«Ù„Ø¬</h3>
                    <label>Ø«Ù„ÙˆØ¬ Ø®ÙÙŠÙØ© (2-4 Ø¨ÙˆØµØ§Øª)</label>
                    <input type="number" id="priceLight" value="25" min="10" max="100">
                    
                    <label style="margin-top: 10px;">Ø«Ù„ÙˆØ¬ Ù…Ø¹ØªØ¯Ù„Ø© (4-8 Ø¨ÙˆØµØ§Øª)</label>
                    <input type="number" id="priceModerate" value="40" min="20" max="150">
                    
                    <label style="margin-top: 10px;">Ø«Ù„ÙˆØ¬ ÙƒØ«ÙŠÙØ© (8+ Ø¨ÙˆØµØ§Øª)</label>
                    <input type="number" id="priceHeavy" value="60" min="30" max="200">
                </div>

                <div class="input-group">
                    <h3>Ø³Ø¹Ø± Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ù…ÙˆØ³Ù…ÙŠ</h3>
                    <label>Ø³Ø¹Ø± Ø§Ù„Ø¹Ù‚Ø¯ (Ø§Ù„Ø´ØªØ§Ø¡ Ø¨Ø£ÙƒÙ…Ù„Ù‡)</label>
                    <input type="number" id="priceContract" value="200" min="100" max="500">
                    <div class="tip-box" style="margin-top: 15px;">
                        <strong>ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø®Ø§Ø·Ø±:</strong> Ø´ØªØ§Ø¡ Ø«Ù‚ÙŠÙ„ = ØªØ¹Ù…Ù„ Ø£ÙƒØ«Ø±ØŒ Ù„Ø§ Ø£Ø¬Ø± Ø¥Ø¶Ø§ÙÙŠ. Ø´ØªØ§Ø¡ Ø®ÙÙŠÙ = ØªÙƒØ³Ø¨ Ù†ÙØ³ Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ù‚Ø§Ø¨Ù„ Ø¹Ù…Ù„ Ø£Ù‚Ù„!
                    </div>
                </div>

                <div class="input-group">
                    <label>ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ - Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø¹Ù‚Ø¯: <span id="contractPercent">40</span>%</label>
                    <input type="range" id="contractSlider" min="0" max="100" value="40" oninput="updateContractPercent()">
                    <div class="slider-value">
                        <div>Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø¹Ù‚Ø¯: <span id="contractCustomers">0</span> | Ø¯Ø®Ù„ Ù…Ø¶Ù…ÙˆÙ†</div>
                        <div>Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø¯ÙØ¹ Ù„ÙƒÙ„ ÙˆØ¸ÙŠÙØ©: <span id="perJobCustomers">0</span> | Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø±Ø¨Ø­</div>
                    </div>
                </div>

                <div class="buttons">
                    <button class="btn-secondary" onclick="prevSection()">â†’ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button class="btn-primary" onclick="nextSection()">Ø§Ù„ØªØ§Ù„ÙŠ â†</button>
                </div>
            </div>

            <!-- Section 4: Service Level -->
            <div class="section" id="section4">
                <div class="tip-box">
                    <strong>ğŸ’¡ Ù†ØµÙŠØ­Ø©:</strong> Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø®ØªÙ„ÙÙˆÙ† ÙŠÙØ¶Ù„ÙˆÙ† Ù…Ø³ØªÙˆÙŠØ§Øª Ù…Ø®ØªÙ„ÙØ© Ù…Ù† Ø§Ù„Ø®Ø¯Ù…Ø©!
                </div>
                <h2 style="margin-bottom: 20px;">â­ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø®Ø¯Ù…Ø©</h2>
                <div class="options-grid">
                    <div class="option-card" data-service="basic">
                        <h3>Ø®Ø¯Ù…Ø© Ø£Ø³Ø§Ø³ÙŠØ© ğŸ§¹</h3>
                        <div class="price">Ø³Ø¹Ø± Ø£Ù‚Ù„</div>
                        <ul>
                            <li>âœ“ Ù…Ø³Ø­ Ø§Ù„Ù…Ù…Ø± ÙÙ‚Ø·</li>
                            <li>âœ“ Ø¯ÙØ¹ Ø§Ù„Ø«Ù„Ø¬ Ù„Ù„Ø¬ÙˆØ§Ù†Ø¨</li>
                            <li>âœ“ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø­ Ø¥Ø°Ø§Ø¨Ø©</li>
                            <li>âœ“ Ø³Ø±ÙŠØ¹ Ù„ÙƒÙ† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</li>
                        </ul>
                    </div>
                    <div class="option-card" data-service="standard">
                        <h3>Ø®Ø¯Ù…Ø© Ù‚ÙŠØ§Ø³ÙŠØ© â­</h3>
                        <div class="price">Ø³Ø¹Ø± Ù‚ÙŠØ§Ø³ÙŠ</div>
                        <ul>
                            <li>âœ“ Ù…Ø³Ø­ Ø§Ù„Ù…Ù…Ø± + Ø§Ù„Ù…Ù…Ø´Ù‰</li>
                            <li>âœ“ ØªØ·Ø¨ÙŠÙ‚ Ù…Ù„Ø­ Ø§Ù„Ø¥Ø°Ø§Ø¨Ø©</li>
                            <li>âœ“ ÙƒÙˆÙ…Ø§Øª Ø§Ù„Ø«Ù„Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø©</li>
                            <li>âœ“ ØªÙˆØ§Ø²Ù† Ø¬ÙŠØ¯</li>
                        </ul>
                    </div>
                    <div class="option-card" data-service="premium">
                        <h3>Ø®Ø¯Ù…Ø© ÙØ§Ø®Ø±Ø© ğŸ’</h3>
                        <div class="price">+50% Ø³Ø¹Ø±</div>
                        <ul>
                            <li>âœ“ ÙƒÙ„ Ø´ÙŠØ¡ ÙÙŠ Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ</li>
                            <li>âœ“ Ù…Ø³Ø­ Ø§Ù„Ø±ØµÙŠÙ Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ø±Ø¹</li>
                            <li>âœ“ Ù…Ø³Ø­ Ø§Ù„Ø´Ø±ÙØ©/Ø§Ù„Ø¯Ø±Ø¬</li>
                            <li>âœ“ Ù…Ù„Ø­ Ø¥Ø°Ø§Ø¨Ø© Ø¥Ø¶Ø§ÙÙŠ</li>
                            <li>âœ“ ÙˆØ¶Ø¹ Ø§Ù„Ø«Ù„Ø¬ Ø¨Ø´ÙƒÙ„ Ø£Ù†ÙŠÙ‚</li>
                        </ul>
                    </div>
                </div>
                <div class="tip-box">
                    <strong>ğŸ‘¥ ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:</strong>
                    <ul style="margin-top: 10px; padding-right: 20px;">
                        <li>â€¢ ÙƒØ¨Ø§Ø± Ø§Ù„Ø³Ù†: ÙŠÙØ¶Ù„ÙˆÙ† Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„ÙØ§Ø®Ø±Ø© (Ù…Ø®Ø§ÙˆÙ ØªØªØ¹Ù„Ù‚ Ø¨Ø§Ù„Ø³Ù„Ø§Ù…Ø©)</li>
                        <li>â€¢ ÙˆØ§Ø¹ÙˆÙ† Ø¨Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©: ÙŠØ±ÙŠØ¯ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</li>
                        <li>â€¢ Ù…ØªÙˆØ³Ø·Ùˆ Ø§Ù„Ø¯Ø®Ù„: ÙŠØ±ÙŠØ¯ÙˆÙ† Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ©</li>
                    </ul>
                </div>
                <div class="buttons">
                    <button class="btn-secondary" onclick="prevSection()">â†’ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button class="btn-primary" onclick="nextSection()">Ø§Ù„ØªØ§Ù„ÙŠ â†</button>
                </div>
            </div>

            <!-- Section 5: Marketing -->
            <div class="section" id="section5">
                <div class="tip-box">
                    <strong>ğŸ’¡ Ù†ØµÙŠØ­Ø©:</strong> Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ³Ù… Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡!
                </div>
                <h2 style="margin-bottom: 20px;">ğŸ“¢ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ ÙˆØ§ÙƒØªØ³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
                
                <h3>Ø§Ø®ØªØ± Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ (ÙŠÙ…ÙƒÙ† Ø§Ø®ØªÙŠØ§Ø± Ø£ÙƒØ«Ø± Ù…Ù† ÙˆØ§Ø­Ø¯Ø©)</h3>
                <div class="options-grid">
                    <div class="option-card" data-marketing="flyers" data-cost="10">
                        <h3>ğŸ“„ Ù†Ø´Ø±Ø§Øª Ù…Ù† Ø¨Ø§Ø¨ Ø¥Ù„Ù‰ Ø¨Ø§Ø¨</h3>
                        <div class="price">$10</div>
                        <ul>
                            <li>ğŸ  Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ 50 Ù…Ù†Ø²Ù„Ø§Ù‹</li>
                            <li>ğŸ‘¤ Ù„Ù…Ø³Ø© Ø´Ø®ØµÙŠØ©</li>
                            <li>ğŸ“Š Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… 15-20%</li>
                        </ul>
                    </div>
                    <div class="option-card" data-marketing="signs" data-cost="15">
                        <h3>ğŸª§ Ù„Ø§ÙØªØ§Øª Ø§Ù„ÙÙ†Ø§Ø¡</h3>
                        <div class="price">$15</div>
                        <ul>
                            <li>ğŸ‘ï¸ ÙŠØ±Ø§Ù‡Ø§ Ø£ÙƒØ«Ø± Ù…Ù† 100+ Ø´Ø®Øµ</li>
                            <li>â° Ù…Ø±Ø¦ÙŠØ© Ø·ÙˆØ§Ù„ Ø§Ù„Ù…ÙˆØ³Ù…</li>
                            <li>ğŸ“Š Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ 8-12%</li>
                        </ul>
                    </div>
                    <div class="option-card" data-marketing="email" data-cost="0">
                        <h3>ğŸ“§ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ø­ÙŠ</h3>
                        <div class="price">Ù…Ø¬Ø§Ù†ÙŠ</div>
                        <ul>
                            <li>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ 80+ Ø¹Ø§Ø¦Ù„Ø©</li>
                            <li>ğŸ’» Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ</li>
                            <li>ğŸ“Š Ù…Ø¹Ø¯Ù„ Ø§Ø³ØªØ¬Ø§Ø¨Ø© 10%</li>
                        </ul>
                    </div>
                    <div class="option-card" data-marketing="presale" data-cost="0">
                        <h3>ğŸ Ø¹Ù‚ÙˆØ¯ Ù…Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¨ÙŠØ¹</h3>
                        <div class="price">Ø®ØµÙ… 10%</div>
                        <ul>
                            <li>âœ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ³Ù…</li>
                            <li>ğŸ’° Ù‚Ø§Ø¹Ø¯Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù…Ø¶Ù…ÙˆÙ†Ø©</li>
                            <li>ğŸ“‰ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø£Ù‚Ù„ Ù„ÙƒÙ„ ÙˆØ¸ÙŠÙØ© Ù„ÙƒÙ† ÙŠÙ‚ÙŠÙ†</li>
                        </ul>
                    </div>
                </div>

                <div class="stat-card" style="margin: 25px 0;">
                    <h3>ØªÙƒÙ„ÙØ© Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©</h3>
                    <div class="result-item">
                        <span class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠ</span>
                        <span class="value" id="marketingCost">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ÙˆÙ†</span>
                        <span class="value" id="expectedCustomers">0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</span>
                        <span class="value" id="remainingCapital">$120.00</span>
                    </div>
                </div>

                <div class="buttons">
                    <button class="btn-secondary" onclick="prevSection()">â†’ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button class="btn-primary" onclick="startSimulation()">Ø§Ø¨Ø¯Ø£ Ø´ØªØ§Ø¡ â„ï¸ â†</button>
                </div>
            </div>

            <!-- Section 6: Simulation -->
            <div class="section" id="section6">
                <h2 style="margin-bottom: 20px;">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ <span id="currentWeek">1</span> Ù…Ù† 8</h2>
                
                <div id="weatherStatus" style="text-align: center; font-size: 3em; margin: 20px 0;">
                    â˜ï¸ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø·Ù‚Ø³...
                </div>

                <div style="margin: 20px 0;">
                    <label style="font-weight: bold;">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¥Ø±Ù‡Ø§Ù‚</label>
                    <div class="fatigue-bar">
                        <div class="fatigue-fill" id="fatigueFill" style="width: 0%;">
                            Ø·Ø§Ù‚Ø© ÙƒØ§Ù…Ù„Ø©!
                        </div>
                    </div>
                </div>

                <h3>Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªØ§Ø­Ø©</h3>
                <div class="jobs-container" id="jobsContainer">
                    <!-- Jobs will be inserted here -->
                </div>

                <div class="buttons">
                    <button class="btn-primary" id="nextWeekBtn" onclick="nextWeek()">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„ØªØ§Ù„ÙŠ â†</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Results/Messages -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="icon" id="modalIcon">ğŸ‰</div>
                <h2 id="modalTitle">Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø´ØªØ§Ø¡!</h2>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content will be inserted here -->
            </div>
            <div class="modal-footer">
                <button class="btn-primary" id="modalButton" onclick="closeModal()">Ø­Ø³Ù†Ø§Ù‹</button>
            </div>
        </div>
    </div>

    <script>
        const gameState = {
            currentSection: 1,
            capital: 120,
            initialCapital: 120,
            week: 0,
            equipment: null,
            area: null,
            pricing: 'perJob',
            service: null,
            marketing: [],
            customers: 0,
            jobsCompleted: 0,
            totalProfit: 0,
            totalRevenue: 0,
            totalCosts: 0,
            satisfaction: 0,
            fatigue: 0,
            tips: 0,
            snowfalls: 0,
            contractCustomers: 0,
            perJobCustomers: 0,
            availableJobs: []
        };

        const equipmentData = {
            basic: { cost: 20, time: 45, opCost: 0, capacity: 'small', fatigueRate: 25 },
            standard: { cost: 60, time: 30, opCost: 2, capacity: 'medium', fatigueRate: 15 },
            professional: { cost: 110, time: 12, opCost: 3, capacity: 'large', maintenance: 5, fatigueRate: 8 },
            partnership: { cost: 40, time: 15, opCost: 0, profitSplit: 0.5, capacity: 'medium', fatigueRate: 10 }
        };

        const areaData = {
            street: { customers: [15, 20], travel: 0 },
            neighborhood: { customers: [50, 80], travel: 7 },
            extended: { customers: [120, 150], travel: 17 }
        };

        const marketingData = {
            flyers: { cost: 10, reach: 50, rate: 0.175 },
            signs: { cost: 15, reach: 100, rate: 0.10 },
            email: { cost: 0, reach: 80, rate: 0.10 },
            presale: { cost: 0, reach: 0, rate: 0, discount: 0.10 }
        };

        // Initialize event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Equipment selection
            document.querySelectorAll('[data-equipment]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('[data-equipment]').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    gameState.equipment = this.dataset.equipment;
                });
            });

            // Area selection
            document.querySelectorAll('[data-area]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('[data-area]').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    gameState.area = this.dataset.area;
                });
            });

            // Pricing model selection
            document.querySelectorAll('input[name="pricingModel"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    gameState.pricing = this.value;
                });
            });

            // Service level selection
            document.querySelectorAll('[data-service]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('[data-service]').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    gameState.service = this.dataset.service;
                });
            });

            // Marketing selection (multiple)
            document.querySelectorAll('[data-marketing]').forEach(card => {
                card.addEventListener('click', function() {
                    const marketing = this.dataset.marketing;
                    if (gameState.marketing.includes(marketing)) {
                        gameState.marketing = gameState.marketing.filter(m => m !== marketing);
                        this.classList.remove('selected');
                    } else {
                        gameState.marketing.push(marketing);
                        this.classList.add('selected');
                    }
                    updateMarketingCosts();
                });
            });
        });

        function updateContractPercent() {
            const value = document.getElementById('contractSlider').value;
            document.getElementById('contractPercent').textContent = value;
            updateCustomerDistribution();
        }

        function updateCustomerDistribution() {
            const contractPercent = parseInt(document.getElementById('contractSlider').value);
            const totalCustomers = gameState.customers;
            const contractCust = Math.floor(totalCustomers * contractPercent / 100);
            const perJobCust = totalCustomers - contractCust;
            
            document.getElementById('contractCustomers').textContent = contractCust;
            document.getElementById('perJobCustomers').textContent = perJobCust;
            
            gameState.contractCustomers = contractCust;
            gameState.perJobCustomers = perJobCust;
        }

        function updateMarketingCosts() {
            let totalCost = 0;
            let expectedCustomers = 0;
            
            gameState.marketing.forEach(m => {
                const data = marketingData[m];
                totalCost += data.cost;
                expectedCustomers += Math.floor(data.reach * data.rate);
            });
            
            // Cap customers based on area
            if (gameState.area) {
                const maxCustomers = areaData[gameState.area].customers[1];
                expectedCustomers = Math.min(expectedCustomers, maxCustomers);
            }
            
            document.getElementById('marketingCost').textContent = '$' + totalCost;
            document.getElementById('expectedCustomers').textContent = expectedCustomers;
            document.getElementById('remainingCapital').textContent = '$' + (gameState.capital - totalCost).toFixed(2);
            
            gameState.customers = expectedCustomers;
            updateCustomerDistribution();
        }

        function nextSection() {
            // Validation
            if (gameState.currentSection === 1 && !gameState.equipment) {
                showMessageModal('âš ï¸', 'ØªÙ†Ø¨ÙŠÙ‡', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }
            if (gameState.currentSection === 2 && !gameState.area) {
                showMessageModal('âš ï¸', 'ØªÙ†Ø¨ÙŠÙ‡', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø®Ø¯Ù…Ø© Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }
            if (gameState.currentSection === 4 && !gameState.service) {
                showMessageModal('âš ï¸', 'ØªÙ†Ø¨ÙŠÙ‡', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¯Ù…Ø© Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }
            
            // Update marketing calculations when entering section 5
            if (gameState.currentSection === 4) {
                updateMarketingCosts();
            }
            
            document.getElementById('section' + gameState.currentSection).classList.remove('active');
            gameState.currentSection++;
            document.getElementById('section' + gameState.currentSection).classList.add('active');
            updateProgressSteps();
            window.scrollTo(0, 0);
        }

        function prevSection() {
            document.getElementById('section' + gameState.currentSection).classList.remove('active');
            gameState.currentSection--;
            document.getElementById('section' + gameState.currentSection).classList.add('active');
            updateProgressSteps();
            window.scrollTo(0, 0);
        }

        function updateProgressSteps() {
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 === gameState.currentSection) {
                    step.classList.add('active');
                } else if (index + 1 < gameState.currentSection) {
                    step.classList.add('completed');
                }
            });
        }

        function startSimulation() {
            if (gameState.marketing.length === 0) {
                showMessageModal('âš ï¸', 'ØªÙ†Ø¨ÙŠÙ‡', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ØªØ³ÙˆÙŠÙ‚ ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!');
                return;
            }
            
            // Deduct initial costs
            const equipCost = equipmentData[gameState.equipment].cost;
            let marketingCost = 0;
            gameState.marketing.forEach(m => {
                marketingCost += marketingData[m].cost;
            });
            
            const totalInitialCost = equipCost + marketingCost;
            
            if (totalInitialCost > gameState.capital) {
                showMessageModal('âš ï¸', 'Ø±Ø£Ø³ Ù…Ø§Ù„ ØºÙŠØ± ÙƒØ§ÙÙ', 'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø±Ø£Ø³ Ù…Ø§Ù„ ÙƒØ§ÙÙ Ù„ØªØºØ·ÙŠØ© Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø£ÙˆÙ„ÙŠØ©!');
                return;
            }
            
            gameState.capital -= totalInitialCost;
            gameState.totalCosts += totalInitialCost;
            
            // Calculate contract revenue
            if (gameState.pricing === 'contract' || gameState.pricing === 'mixed') {
                const contractPrice = parseFloat(document.getElementById('priceContract').value);
                const contractRevenue = gameState.contractCustomers * contractPrice;
                gameState.capital += contractRevenue;
                gameState.totalRevenue += contractRevenue;
            }
            
            updateDashboard();
            
            document.getElementById('section5').classList.remove('active');
            gameState.currentSection = 6;
            document.getElementById('section6').classList.add('active');
            updateProgressSteps();
            
            gameState.week = 1;
            simulateWeek();
        }

        function simulateWeek() {
            document.getElementById('currentWeek').textContent = gameState.week;
            document.getElementById('week').textContent = 'Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ' + gameState.week;
            
            // Reset fatigue each week
            gameState.fatigue = Math.max(0, gameState.fatigue - 30);
            updateFatigueBar();
            
            // Random weather - 60% chance of snow
            const snowChance = Math.random();
            if (snowChance < 0.6) {
                const rand = Math.random();
                const snowAmount = rand < 0.2 ? 'heavy' : (rand < 0.6 ? 'moderate' : 'light');
                gameState.snowfalls++;
                
                const snowEmoji = snowAmount === 'heavy' ? 'â„ï¸â„ï¸â„ï¸' : snowAmount === 'moderate' ? 'â„ï¸â„ï¸' : 'â„ï¸';
                document.getElementById('weatherStatus').textContent = snowEmoji + ' ØªØ³Ø§Ù‚Ø· Ø«Ù„ÙˆØ¬ ' + (snowAmount === 'heavy' ? 'ÙƒØ«ÙŠÙØ©' : snowAmount === 'moderate' ? 'Ù…Ø¹ØªØ¯Ù„Ø©' : 'Ø®ÙÙŠÙØ©') + '!';
                generateJobs(snowAmount);
            } else {
                document.getElementById('weatherStatus').textContent = 'â˜ï¸ Ù„Ø§ Ø«Ù„ÙˆØ¬ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹';
                document.getElementById('jobsContainer').innerHTML = '<p style="text-align:center;color:#666;padding:30px;">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù Ù…ØªØ§Ø­Ø© Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹. Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ø±Ø§Ø­Ø©!</p>';
            }
            
            // Maintenance costs for professional equipment
            if (gameState.equipment === 'professional') {
                gameState.capital -= 5;
                gameState.totalCosts += 5;
            }
            
            updateDashboard();
        }

        function generateJobs(snowAmount) {
            const container = document.getElementById('jobsContainer');
            container.innerHTML = '';
            
            // Generate jobs based on per-job customers only
            const maxJobs = gameState.perJobCustomers > 0 ? Math.min(gameState.perJobCustomers, Math.floor(Math.random() * 3) + 3) : 0;
            
            if (maxJobs === 0) {
                container.innerHTML = '<p style="text-align:center;color:#666;padding:30px;">Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„Ø§Ø¦Ùƒ Ø¹Ù„Ù‰ Ø¹Ù‚ÙˆØ¯ Ù…ÙˆØ³Ù…ÙŠØ©. Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¶Ø§ÙÙŠØ© Ù…ØªØ§Ø­Ø©.</p>';
                return;
            }
            
            const prices = {
                light: parseFloat(document.getElementById('priceLight').value),
                moderate: parseFloat(document.getElementById('priceModerate').value),
                heavy: parseFloat(document.getElementById('priceHeavy').value)
            };
            
            gameState.availableJobs = [];
            
            for (let i = 0; i < maxJobs; i++) {
                const jobPrice = prices[snowAmount];
                gameState.availableJobs.push({ id: i, price: jobPrice, snowAmount: snowAmount });
                
                const job = document.createElement('div');
                job.className = 'job-card';
                job.id = 'job-' + i;
                
                const snowText = snowAmount === 'heavy' ? 'ÙƒØ«ÙŠÙØ©' : snowAmount === 'moderate' ? 'Ù…Ø¹ØªØ¯Ù„Ø©' : 'Ø®ÙÙŠÙØ©';
                
                job.innerHTML = `
                    <div class="job-info">
                        <h4>ğŸ  Ù…Ù†Ø²Ù„ ${i + 1}</h4>
                        <div class="job-details">
                            Ø«Ù„ÙˆØ¬ ${snowText} - Ø§Ù„Ø£Ø¬Ø±: $${jobPrice}
                        </div>
                    </div>
                    <div class="job-action">
                        <button onclick="completeJob(${i}, ${jobPrice}, '${snowAmount}')">Ù‚Ø¨ÙˆÙ„ Ø§Ù„ÙˆØ¸ÙŠÙØ©</button>
                    </div>
                `;
                container.appendChild(job);
            }
        }

        function completeJob(jobId, price, snowAmount) {
            const equipData = equipmentData[gameState.equipment];
            
            // Check fatigue
            if (gameState.fatigue >= 95) {
                showMessageModal('ğŸ˜«', 'Ø¥Ø±Ù‡Ø§Ù‚ Ø´Ø¯ÙŠØ¯', 'Ø£Ù†Øª Ù…Ø±Ù‡Ù‚ Ø¬Ø¯Ù‹Ø§! ÙŠØ¬Ø¨ Ø£Ù† ØªØ³ØªØ±ÙŠØ­ Ù‚Ø¨Ù„ Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ÙˆØ¸Ø§Ø¦Ù.');
                return;
            }
            
            // Calculate earnings
            let earnings = price;
            if (equipData.profitSplit) {
                earnings *= equipData.profitSplit;
            }
            
            // Deduct operating costs
            const opCost = equipData.opCost || 0;
            earnings -= opCost;
            
            // Add tip chance (30% chance)
            let tip = 0;
            if (Math.random() < 0.3) {
                tip = Math.floor(Math.random() * 10) + 5;
                earnings += tip;
                gameState.tips += tip;
            }
            
            gameState.capital += earnings;
            gameState.totalRevenue += price;
            gameState.totalCosts += opCost;
            gameState.totalProfit = gameState.totalRevenue - gameState.totalCosts - gameState.initialCapital;
            gameState.jobsCompleted++;
            
            // Increase fatigue
            gameState.fatigue = Math.min(100, gameState.fatigue + equipData.fatigueRate);
            
            // Update satisfaction (increases with each job)
            const satisfactionIncrease = gameState.service === 'premium' ? 3 : gameState.service === 'standard' ? 2 : 1;
            gameState.satisfaction = Math.min(100, gameState.satisfaction + satisfactionIncrease);
            
            updateDashboard();
            updateFatigueBar();
            
            // Remove job from display
            const jobCard = document.getElementById('job-' + jobId);
            if (jobCard) {
                jobCard.style.opacity = '0';
                setTimeout(() => jobCard.remove(), 300);
            }
            
            // Show earning notification
            if (tip > 0) {
                showMessageModal('ğŸ’°', 'Ø¹Ù…Ù„ Ø±Ø§Ø¦Ø¹!', `Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø§Ù„ÙˆØ¸ÙŠÙØ© ÙˆÙƒØ³Ø¨Øª $${earnings.toFixed(2)}<br>Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ $${tip} Ø¨Ù‚Ø´ÙŠØ´! ğŸ‰`);
            }
        }

        function updateFatigueBar() {
            const fill = document.getElementById('fatigueFill');
            fill.style.width = gameState.fatigue + '%';
            
            if (gameState.fatigue < 30) {
                fill.textContent = 'Ø·Ø§Ù‚Ø© ÙƒØ§Ù…Ù„Ø©! ğŸ’ª';
            } else if (gameState.fatigue < 60) {
                fill.textContent = 'Ù…ØªØ¹Ø¨ Ù‚Ù„ÙŠÙ„Ø§Ù‹ ğŸ˜Š';
            } else if (gameState.fatigue < 85) {
                fill.textContent = 'Ù…ØªØ¹Ø¨ ğŸ˜“';
            } else {
                fill.textContent = 'Ù…Ø±Ù‡Ù‚ Ø¬Ø¯Ø§Ù‹! ğŸ˜«';
            }
        }

        function nextWeek() {
            if (gameState.week >= 8) {
                showFinalResults();
                return;
            }
            
            gameState.week++;
            simulateWeek();
            window.scrollTo(0, 0);
        }

        function updateDashboard() {
            document.getElementById('capital').textContent = '$' + gameState.capital.toFixed(2);
            document.getElementById('customers').textContent = gameState.customers;
            document.getElementById('jobsCompleted').textContent = gameState.jobsCompleted;
            document.getElementById('totalProfit').textContent = '$' + gameState.totalProfit.toFixed(2);
            document.getElementById('satisfaction').textContent = Math.round(gameState.satisfaction) + '%';
        }

        function showFinalResults() {
            const winterType = gameState.snowfalls < 3 ? 'Ø®ÙÙŠÙ' : gameState.snowfalls > 5 ? 'Ø«Ù‚ÙŠÙ„' : 'Ù…Ø¹ØªØ¯Ù„';
            
            const profitClass = gameState.totalProfit > 0 ? 'positive' : gameState.totalProfit < 0 ? 'negative' : '';
            
            const bodyHTML = `
                <h3>Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø§Ù„ÙŠ</h3>
                <div class="result-item positive">
                    <span class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</span>
                    <span class="value">$${gameState.totalRevenue.toFixed(2)}</span>
                </div>
                <div class="result-item negative">
                    <span class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ</span>
                    <span class="value">$${gameState.totalCosts.toFixed(2)}</span>
                </div>
                <div class="result-item ${profitClass}">
                    <span class="label">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</span>
                    <span class="value">$${gameState.totalProfit.toFixed(2)}</span>
                </div>

                <h3 style="margin-top: 25px;">Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©</h3>
                <div class="result-item">
                    <span class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</span>
                    <span class="value">${gameState.jobsCompleted}</span>
                </div>
                <div class="result-item">
                    <span class="label">Ù…ØªÙˆØ³Ø· â€‹â€‹Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</span>
                    <span class="value">${Math.round(gameState.satisfaction)}%</span>
                </div>
                <div class="result-item positive">
                    <span class="label">Ø§Ù„Ø¨Ù‚Ø´ÙŠØ´ Ø§Ù„Ù…Ø³ØªÙ„Ù…</span>
                    <span class="value">$${gameState.tips.toFixed(2)}</span>
                </div>

                <h3 style="margin-top: 25px;">Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù‚Ø³</h3>
                <div class="result-item">
                    <span class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ ØªØ³Ø§Ù‚Ø· Ø§Ù„Ø«Ù„ÙˆØ¬</span>
                    <span class="value">${gameState.snowfalls}</span>
                </div>
                <div class="result-item">
                    <span class="label">Ù†ÙˆØ¹ Ø§Ù„Ø´ØªØ§Ø¡</span>
                    <span class="value">${winterType}</span>
                </div>

                <div class="tip-box" style="margin-top: 25px;">
                    <strong>ğŸ“ Ø¹Ù…Ù„ Ø±Ø§Ø¦Ø¹!</strong> Ù„Ù‚Ø¯ ØªØ¹Ù„Ù…Øª ÙƒÙŠÙÙŠØ© Ø¥Ø¯Ø§Ø±Ø© Ø£Ø¹Ù…Ø§Ù„ Ù…ÙˆØ³Ù…ÙŠØ©.
                    ${gameState.totalProfit > 100 ? '<br><br>ğŸŒŸ Ø±Ø¨Ø­ Ù…Ù…ØªØ§Ø²! Ù„Ø¯ÙŠÙƒ Ù…Ù‡Ø§Ø±Ø§Øª ØªØ¬Ø§Ø±ÙŠØ© Ù‚ÙˆÙŠØ©!' : ''}
                    ${gameState.totalProfit < 0 ? '<br><br>ğŸ’¡ Ø®Ø³Ø§Ø±Ø© Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø©ØŒ Ù„ÙƒÙ† ÙƒÙ„ ØªØ¬Ø±Ø¨Ø© ØªØ¹Ù„Ù…Ùƒ Ø´ÙŠØ¦Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹!' : ''}
                </div>
            `;
            
            document.getElementById('modalIcon').textContent = 'ğŸ‰';
            document.getElementById('modalTitle').textContent = 'Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø´ØªØ§Ø¡!';
            document.getElementById('modalBody').innerHTML = bodyHTML;
            document.getElementById('modalButton').textContent = 'â†º Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©';
            document.getElementById('modalButton').onclick = resetGame;
            
            document.getElementById('resultModal').classList.add('show');
        }

        function showMessageModal(icon, title, message) {
            document.getElementById('modalIcon').textContent = icon;
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <p style="font-size: 1.1em; line-height: 1.6;">${message}</p>
                </div>
            `;
            document.getElementById('modalButton').textContent = 'Ø­Ø³Ù†Ø§Ù‹';
            document.getElementById('modalButton').onclick = closeModal;
            
            document.getElementById('resultModal').classList.add('show');
        }

        function closeModal() {
            document.getElementById('resultModal').classList.remove('show');
        }

        function resetGame() {
            location.reload();
        }

        // Close modal on outside click
        document.getElementById('resultModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>
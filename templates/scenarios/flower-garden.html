<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„Ø²Ù‡ÙˆØ± - Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8e6cf 0%, #dcedc1 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            padding: 30px;
            text-align: center;
            color: white;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            text-decoration: none;
            transition: all 0.3s;
        }

        .back-button:hover {
            background: rgba(255,255,255,0.3);
        }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 3px solid #e9ecef;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .stat-card .icon {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card .label {
            font-size: 0.9em;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .stat-card .value {
            font-size: 1.5em;
            font-weight: bold;
            color: #495057;
        }

        .game-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            padding: 20px;
        }

        .main-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .season-card {
            background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
            padding: 20px;
            border-radius: 15px;
            color: white;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .season-icon {
            font-size: 3em;
        }

        .season-info h3 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #495057;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .flower-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }

        .flower-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .flower-card:hover {
            border-color: #56ab2f;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(86, 171, 47, 0.2);
        }

        .flower-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .flower-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .flower-cost {
            color: #dc3545;
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .flower-price {
            color: #28a745;
            font-size: 0.8em;
            margin-bottom: 8px;
        }

        .flower-time {
            color: #6c757d;
            font-size: 0.75em;
            margin-bottom: 10px;
        }

        .flower-quantity {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
            padding: 6px 12px;
            font-size: 0.9em;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        .btn-secondary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quantity {
            font-size: 1.1em;
            font-weight: bold;
            min-width: 30px;
            text-align: center;
        }

        .supplies-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .supply-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .supply-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .supply-icon {
            font-size: 1.5em;
        }

        .arrangement-section {
            margin-top: 15px;
        }

        .arrangement-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .arrangement-btn {
            padding: 15px;
            border: 2px solid #e9ecef;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .arrangement-btn:hover {
            border-color: #56ab2f;
        }

        .arrangement-btn.active {
            border-color: #56ab2f;
            background: #f0fdf4;
            color: #56ab2f;
            font-weight: bold;
        }

        .arrangement-icon {
            font-size: 2.5em;
            display: block;
            margin-bottom: 8px;
        }

        .cost-summary {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .cost-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }

        .cost-row:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 1.1em;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
            flex: 1;
            padding: 15px;
            font-size: 1.2em;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(86, 171, 47, 0.4);
        }

        .btn-reset {
            background: #dc3545;
            color: white;
            padding: 15px 30px;
            font-size: 1.1em;
        }

        .btn-reset:hover {
            background: #c82333;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .event-card {
            background: #fff3cd;
            padding: 20px;
            border-radius: 15px;
            border-right: 5px solid #ffc107;
        }

        .event-card h3 {
            color: #856404;
            margin-bottom: 10px;
        }

        .tips-card {
            background: #d1ecf1;
            padding: 20px;
            border-radius: 15px;
        }

        .tips-card h3 {
            color: #0c5460;
            margin-bottom: 15px;
        }

        .tip-item {
            background: white;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .inventory-item {
            background: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            animation: modalSlide 0.3s ease-out;
        }

        @keyframes modalSlide {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content h2 {
            font-size: 2em;
            margin-bottom: 20px;
            color: #495057;
        }

        .result-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        @media (max-width: 768px) {
            .game-content {
                grid-template-columns: 1fr;
            }

            .stats-bar {
                grid-template-columns: repeat(2, 1fr);
            }

            .header h1 {
                font-size: 1.8em;
            }

            .back-button {
                position: static;
                transform: none;
                display: inline-block;
                margin-bottom: 10px;
            }

            .flower-grid {
                grid-template-columns: 1fr;
            }

            .arrangement-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="{% url "scenarios:scenario_list" %}" class="back-button">ğŸŒ¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ â†’</a>
            <h1>Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„Ø²Ù‡ÙˆØ±</h1>
        </div>

        <div class="stats-bar">
            <div class="stat-card">
                <div class="icon">ğŸ’µ</div>
                <div class="label">Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„</div>
                <div class="value" id="money">$60.00</div>
            </div>
            <div class="stat-card">
                <div class="icon">ğŸ“…</div>
                <div class="label">Ø§Ù„ÙŠÙˆÙ…</div>
                <div class="value" id="day">1</div>
            </div>
            <div class="stat-card">
                <div class="icon">ğŸ’°</div>
                <div class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø¨Ø­</div>
                <div class="value" id="totalProfit">$0.00</div>
            </div>
            <div class="stat-card">
                <div class="icon">ğŸ’</div>
                <div class="label">Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©</div>
                <div class="value" id="bouquetsSold">0</div>
            </div>
            <div class="stat-card">
                <div class="icon">â­</div>
                <div class="label">Ø§Ù„Ø¬ÙˆØ¯Ø©</div>
                <div class="value" id="quality">5.0</div>
            </div>
        </div>

        <div class="game-content">
            <div class="main-panel">
                <div class="season-card">
                    <div class="season-icon" id="seasonIcon">ğŸŒ¸</div>
                    <div class="season-info">
                        <h3 id="seasonName">Ù…ÙˆØ³Ù… Ø§Ù„Ø±Ø¨ÙŠØ¹</h3>
                        <p id="seasonDesc">Ø§Ù„Ø²Ù‡ÙˆØ± ÙÙŠ Ø£ÙˆØ¬ Ø¬Ù…Ø§Ù„Ù‡Ø§!</p>
                    </div>
                </div>

                <div class="section">
                    <h2>ğŸŒ· Ø§Ø®ØªØ± Ø§Ù„Ø²Ù‡ÙˆØ±</h2>
                    <div class="flower-grid" id="flowerGrid"></div>
                </div>

                <div class="section">
                    <h2>ğŸ Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø§Ù‚Ø© ÙˆØ§Ù„ØªØºÙ„ÙŠÙ</h2>
                    <div class="arrangement-section">
                        <div class="arrangement-options">
                            <button class="arrangement-btn active" data-type="simple" onclick="selectArrangement(this)">
                                <span class="arrangement-icon">ğŸ’</span>
                                <div style="font-weight: bold;">Ø¨Ø§Ù‚Ø© Ø¨Ø³ÙŠØ·Ø©</div>
                                <div style="font-size: 0.85em; color: #6c757d; margin-top: 5px;">Ù…Ø¬Ø§Ù†ÙŠ</div>
                            </button>
                            <button class="arrangement-btn" data-type="wrapped" onclick="selectArrangement(this)">
                                <span class="arrangement-icon">ğŸ€</span>
                                <div style="font-weight: bold;">Ø¨Ø§Ù‚Ø© Ù…ØºÙ„ÙØ©</div>
                                <div style="font-size: 0.85em; color: #6c757d; margin-top: 5px;">$2/Ø¨Ø§Ù‚Ø©</div>
                            </button>
                            <button class="arrangement-btn" data-type="vase" onclick="selectArrangement(this)">
                                <span class="arrangement-icon">ğŸº</span>
                                <div style="font-weight: bold;">Ù…Ø¹ Ù…Ø²Ù‡Ø±ÙŠØ©</div>
                                <div style="font-size: 0.85em; color: #6c757d; margin-top: 5px;">$5/Ø¨Ø§Ù‚Ø©</div>
                            </button>
                            <button class="arrangement-btn" data-type="premium" onclick="selectArrangement(this)">
                                <span class="arrangement-icon">ğŸ</span>
                                <div style="font-weight: bold;">Ø¨Ø§Ù‚Ø© ÙØ§Ø®Ø±Ø©</div>
                                <div style="font-size: 0.85em; color: #6c757d; margin-top: 5px;">$8/Ø¨Ø§Ù‚Ø©</div>
                            </button>
                        </div>
                    </div>

                    <div class="supplies-section">
                        <h4 style="margin-bottom: 15px;">ğŸ§° Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©:</h4>
                        
                        <div class="supply-item">
                            <div class="supply-info">
                                <span class="supply-icon">ğŸ’§</span>
                                <div>
                                    <div style="font-weight: bold;">Ø³Ù…Ø§Ø¯ Ø®Ø§Øµ</div>
                                    <div style="font-size: 0.85em; color: #6c757d;">ÙŠØ­Ø³Ù† Ø§Ù„Ø¬ÙˆØ¯Ø© - $10</div>
                                </div>
                            </div>
                            <input type="checkbox" id="fertilizer" onchange="updateDisplay()" style="width: 24px; height: 24px; cursor: pointer;">
                        </div>

                        <div class="supply-item">
                            <div class="supply-info">
                                <span class="supply-icon">ğŸ€</span>
                                <div>
                                    <div style="font-weight: bold;">Ø´Ø±Ø§Ø¦Ø· ÙˆØ²ÙŠÙ†Ø©</div>
                                    <div style="font-size: 0.85em; color: #6c757d;">ÙŠØ²ÙŠØ¯ Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ© - $8</div>
                                </div>
                            </div>
                            <input type="checkbox" id="ribbons" onchange="updateDisplay()" style="width: 24px; height: 24px; cursor: pointer;">
                        </div>

                        <div class="supply-item">
                            <div class="supply-info">
                                <span class="supply-icon">ğŸ’³</span>
                                <div>
                                    <div style="font-weight: bold;">Ø¨Ø·Ø§Ù‚Ø§Øª ØªÙ‡Ù†Ø¦Ø©</div>
                                    <div style="font-size: 0.85em; color: #6c757d;">Ù„Ù…Ø³Ø© Ø´Ø®ØµÙŠØ© - $5</div>
                                </div>
                            </div>
                            <input type="checkbox" id="cards" onchange="updateDisplay()" style="width: 24px; height: 24px; cursor: pointer;">
                        </div>
                    </div>
                </div>

                <div class="cost-summary">
                    <div class="cost-row">
                        <span>ØªÙƒÙ„ÙØ© Ø§Ù„Ø²Ù‡ÙˆØ±</span>
                        <span id="flowerCost">$0.00</span>
                    </div>
                    <div class="cost-row">
                        <span>ØªÙƒÙ„ÙØ© Ø§Ù„ØªØºÙ„ÙŠÙ</span>
                        <span id="arrangementCost">$0.00</span>
                    </div>
                    <div class="cost-row">
                        <span>ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª</span>
                        <span id="supplyCost">$0.00</span>
                    </div>
                    <div class="cost-row">
                        <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</span>
                        <span id="totalCost">$0.00</span>
                    </div>
                    <div class="cost-row">
                        <span>Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</span>
                        <span id="remainingMoney">$60.00</span>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-reset" onclick="resetDay()">â†º Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
                    <button class="btn btn-primary" onclick="openShop()">ğŸª Ø§ÙØªØ­ Ø§Ù„Ù…ØªØ¬Ø±!</button>
                </div>
            </div>

            <div class="sidebar">
                <div class="event-card">
                    <h3>ğŸ‰ Ø­Ø¯Ø« Ø§Ù„ÙŠÙˆÙ…</h3>
                    <h4 id="eventTitle">Ù…ÙˆØ³Ù… Ø§Ù„Ø²Ù‡ÙˆØ±!</h4>
                    <p id="eventDesc">Ø§Ù„Ù†Ø§Ø³ ÙŠØ´ØªØ±ÙˆÙ† Ø§Ù„Ø²Ù‡ÙˆØ± Ù„Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ø³Ø¹ÙŠØ¯Ø©!</p>
                </div>

                <div class="tips-card">
                    <h3>ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ø§Ø­ØªØ±Ø§ÙÙŠØ©</h3>
                    <div class="tip-item">ğŸŒ· Ø§Ø®ØªØ± Ø²Ù‡ÙˆØ±Ø§Ù‹ Ù…ØªÙ†ÙˆØ¹Ø© Ù„Ø¬Ø°Ø¨ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†.</div>
                    <div class="tip-item">ğŸ Ø§Ù„ØªØºÙ„ÙŠÙ Ø§Ù„Ø¬ÙŠØ¯ ÙŠØ²ÙŠØ¯ Ù…Ù† Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¨Ø§Ù‚Ø©.</div>
                    <div class="tip-item">ğŸ’§ Ø§Ù„Ø³Ù…Ø§Ø¯ ÙŠØ­Ø³Ù† Ù…Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø²Ù‡ÙˆØ±.</div>
                    <div class="tip-item">â­ Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ© ØªØ¨Ù†ÙŠ Ø³Ù…Ø¹Ø© Ø¬ÙŠØ¯Ø©.</div>
                    <div class="tip-item">ğŸ“Š Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø²Ù‡ÙˆØ± Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹ ÙÙŠ ÙƒÙ„ Ù…ÙˆØ³Ù….</div>
                </div>

                <div class="section">
                    <h2>ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2>
                    <div class="inventory-grid" id="inventoryDisplay">
                        <p style="grid-column: 1/-1; text-align: center; color: #6c757d;">Ø§Ø´ØªØ± Ø§Ù„Ø²Ù‡ÙˆØ± Ù„Ø±Ø¤ÙŠØ© Ù…Ø®Ø²ÙˆÙ†Ùƒ</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h2>ğŸ‰ Ø§Ù„ÙŠÙˆÙ… Ù…ÙƒØªÙ…Ù„!</h2>
            <div class="result-stat">
                <span>Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©</span>
                <strong id="resultBouquets">0</strong>
            </div>
            <div class="result-stat">
                <span>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</span>
                <strong id="resultRevenue">$0.00</strong>
            </div>
            <div class="result-stat">
                <span>Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</span>
                <strong id="resultExpenses">$0.00</strong>
            </div>
            <div class="result-stat">
                <span>Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ØµØ§ÙÙŠ</span>
                <strong id="resultProfit" style="color: #28a745;">$0.00</strong>
            </div>
            <div class="result-stat">
                <span>ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¬ÙˆØ¯Ø©</span>
                <strong id="resultQuality">5.0 â­</strong>
            </div>
            <div class="action-buttons" style="margin-top: 20px;">
                <button class="btn btn-reset" onclick="endGame()">ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
                <button class="btn btn-primary" onclick="nextDay()">â† Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>
        </div>
    </div>

    <script>
        const flowers = [
            { id: 1, name: 'ÙˆØ±ÙˆØ¯ Ø­Ù…Ø±Ø§Ø¡', icon: 'ğŸŒ¹', cost: 3, basePrice: 8, growTime: 'Ø³Ø±ÙŠØ¹', demand: 'high' },
            { id: 2, name: 'ØªÙˆÙ„ÙŠØ¨', icon: 'ğŸŒ·', cost: 2.5, basePrice: 7, growTime: 'Ù…ØªÙˆØ³Ø·', demand: 'high' },
            { id: 3, name: 'Ø¹Ø¨Ø§Ø¯ Ø§Ù„Ø´Ù…Ø³', icon: 'ğŸŒ»', cost: 2, basePrice: 6, growTime: 'Ø³Ø±ÙŠØ¹', demand: 'medium' },
            { id: 4, name: 'Ø²Ù†Ø¨Ù‚', icon: 'ğŸŒ¼', cost: 3.5, basePrice: 9, growTime: 'Ø¨Ø·ÙŠØ¡', demand: 'medium' },
            { id: 5, name: 'Ø£ÙˆØ±ÙƒÙŠØ¯', icon: 'ğŸŒº', cost: 5, basePrice: 13, growTime: 'Ø¨Ø·ÙŠØ¡', demand: 'low' },
            { id: 6, name: 'ÙŠØ§Ø³Ù…ÙŠÙ†', icon: 'ğŸµï¸', cost: 2.8, basePrice: 7.5, growTime: 'Ù…ØªÙˆØ³Ø·', demand: 'medium' }
        ];

        const gameState = {
            money: 60,
            day: 1,
            totalProfit: 0,
            totalBouquetsSold: 0,
            quality: 5.0,
            cart: {},
            inventory: {},
            arrangement: 'simple',
            supplies: {
                fertilizer: false,
                ribbons: false,
                cards: false
            },
            season: null
        };

        const arrangementCosts = {
            simple: 0,
            wrapped: 2,
            vase: 5,
            premium: 8
        };

        const supplyCosts = {
            fertilizer: 10,
            ribbons: 8,
            cards: 5
        };

        const seasons = [
            { icon: 'ğŸŒ¸', name: 'Ù…ÙˆØ³Ù… Ø§Ù„Ø±Ø¨ÙŠØ¹', desc: 'Ø§Ù„Ø²Ù‡ÙˆØ± ÙÙŠ Ø£ÙˆØ¬ Ø¬Ù…Ø§Ù„Ù‡Ø§!', multiplier: 1.5 },
            { icon: 'ğŸ’', name: 'Ø¹ÙŠØ¯ Ø§Ù„Ø­Ø¨', desc: 'Ø§Ù„Ù†Ø§Ø³ ÙŠØ´ØªØ±ÙˆÙ† Ø§Ù„ÙˆØ±ÙˆØ¯ Ù„Ù„Ø£Ø­Ø¨Ø§Ø¡!', multiplier: 2.0 },
            { icon: 'ğŸ‘°', name: 'Ù…ÙˆØ³Ù… Ø§Ù„Ø£Ø¹Ø±Ø§Ø³', desc: 'Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø­ÙÙ„Ø§Øª Ø§Ù„Ø²ÙØ§Ù!', multiplier: 1.7 },
            { icon: 'ğŸ‚', name: 'Ù…ÙˆØ³Ù… Ø§Ù„Ø­ÙÙ„Ø§Øª', desc: 'Ø§Ù„Ø²Ù‡ÙˆØ± Ù„Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ø³Ø¹ÙŠØ¯Ø©!', multiplier: 1.3 }
        ];

        function initGame() {
            setRandomSeason();
            renderFlowerGrid();
            updateDisplay();
        }

        function setRandomSeason() {
            gameState.season = seasons[Math.floor(Math.random() * seasons.length)];
            document.getElementById('seasonIcon').textContent = gameState.season.icon;
            document.getElementById('seasonName').textContent = gameState.season.name;
            document.getElementById('seasonDesc').textContent = gameState.season.desc;
        }

        function renderFlowerGrid() {
            const grid = document.getElementById('flowerGrid');
            grid.innerHTML = '';

            flowers.forEach(flower => {
                const card = document.createElement('div');
                card.className = 'flower-card';
                card.innerHTML = `
                    <div class="flower-icon">${flower.icon}</div>
                    <div class="flower-name">${flower.name}</div>
                    <div class="flower-cost">Ø§Ù„ØªÙƒÙ„ÙØ©: $${flower.cost}</div>
                    <div class="flower-price">Ø§Ù„Ø³Ø¹Ø±: $${flower.basePrice}</div>
                    <div class="flower-time">â±ï¸ ${flower.growTime}</div>
                    <div class="flower-quantity">
                        <button class="btn btn-secondary" onclick="changeFlowerQuantity(${flower.id}, -1)">-</button>
                        <span class="quantity" id="flower-${flower.id}">0</span>
                        <button class="btn btn-secondary" onclick="changeFlowerQuantity(${flower.id}, 1)">+</button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function changeFlowerQuantity(flowerId, change) {
            const flower = flowers.find(f => f.id === flowerId);
            const currentQty = gameState.cart[flowerId] || 0;
            const newQty = Math.max(0, currentQty + change);

            if (change > 0) {
                const totalCost = calculateTotalCost() + flower.cost;
                if (totalCost > gameState.money) {
                    alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù†Ù‚ÙˆØ¯ ÙƒØ§ÙÙŠØ©!');
                    return;
                }
            }

            if (newQty === 0) {
                delete gameState.cart[flowerId];
            } else {
                gameState.cart[flowerId] = newQty;
            }

            document.getElementById(`flower-${flowerId}`).textContent = newQty;
            updateDisplay();
        }

        function selectArrangement(btn) {
            const siblings = btn.parentElement.querySelectorAll('.arrangement-btn');
            siblings.forEach(s => s.classList.remove('active'));
            btn.classList.add('active');
            gameState.arrangement = btn.dataset.type;
            updateDisplay();
        }

        function calculateTotalCost() {
            let flowerCost = 0;
            let flowerCount = 0;
            
            for (let id in gameState.cart) {
                const flower = flowers.find(f => f.id === parseInt(id));
                flowerCost += flower.cost * gameState.cart[id];
                flowerCount += gameState.cart[id];
            }

            const bouquetCount = Math.floor(flowerCount / 5); // 5 flowers per bouquet
            const arrangementCost = bouquetCount * arrangementCosts[gameState.arrangement];

            let supplyCost = 0;
            if (document.getElementById('fertilizer').checked) supplyCost += supplyCosts.fertilizer;
            if (document.getElementById('ribbons').checked) supplyCost += supplyCosts.ribbons;
            if (document.getElementById('cards').checked) supplyCost += supplyCosts.cards;

            return flowerCost + arrangementCost + supplyCost;
        }

        function updateDisplay() {
            document.getElementById('money').textContent = '$' + gameState.money.toFixed(2);
            document.getElementById('day').textContent = gameState.day;
            document.getElementById('totalProfit').textContent = '$' + gameState.totalProfit.toFixed(2);
            document.getElementById('bouquetsSold').textContent = gameState.totalBouquetsSold;
            document.getElementById('quality').textContent = gameState.quality.toFixed(1);

            let flowerCost = 0;
            let flowerCount = 0;
            
            for (let id in gameState.cart) {
                const flower = flowers.find(f => f.id === parseInt(id));
                flowerCost += flower.cost * gameState.cart[id];
                flowerCount += gameState.cart[id];
            }

            const bouquetCount = Math.floor(flowerCount / 5);
            const arrangementCost = bouquetCount * arrangementCosts[gameState.arrangement];

            let supplyCost = 0;
            if (document.getElementById('fertilizer').checked) supplyCost += supplyCosts.fertilizer;
            if (document.getElementById('ribbons').checked) supplyCost += supplyCosts.ribbons;
            if (document.getElementById('cards').checked) supplyCost += supplyCosts.cards;

            const totalCost = flowerCost + arrangementCost + supplyCost;

            document.getElementById('flowerCost').textContent = '$' + flowerCost.toFixed(2);
            document.getElementById('arrangementCost').textContent = '$' + arrangementCost.toFixed(2);
            document.getElementById('supplyCost').textContent = '$' + supplyCost.toFixed(2);
            document.getElementById('totalCost').textContent = '$' + totalCost.toFixed(2);
            document.getElementById('remainingMoney').textContent = '$' + (gameState.money - totalCost).toFixed(2);

            updateInventoryDisplay();
        }

        function updateInventoryDisplay() {
            const container = document.getElementById('inventoryDisplay');
            const hasInventory = Object.keys(gameState.inventory).length > 0;

            if (!hasInventory) {
                container.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: #6c757d;">Ø§Ø´ØªØ± Ø§Ù„Ø²Ù‡ÙˆØ± Ù„Ø±Ø¤ÙŠØ© Ù…Ø®Ø²ÙˆÙ†Ùƒ</p>';
                return;
            }

            container.innerHTML = '';
            for (let id in gameState.inventory) {
                const flower = flowers.find(f => f.id === parseInt(id));
                const qty = gameState.inventory[id];
                if (qty > 0) {
                    const div = document.createElement('div');
                    div.className = 'inventory-item';
                    div.innerHTML = `
                        <div style="font-size: 1.5em;">${flower.icon}</div>
                        <div style="font-size: 0.9em; color: #6c757d;">${flower.name}</div>
                        <div style="font-weight: bold;">${qty}</div>
                    `;
                    container.appendChild(div);
                }
            }
        }

        function openShop() {
            const totalCost = calculateTotalCost();

            if (totalCost > gameState.money) {
                alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù†Ù‚ÙˆØ¯ ÙƒØ§ÙÙŠØ©!');
                return;
            }

            let flowerCount = 0;
            for (let id in gameState.cart) {
                flowerCount += gameState.cart[id];
            }

            if (flowerCount < 5) {
                alert('ØªØ­ØªØ§Ø¬ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 5 Ø²Ù‡ÙˆØ± Ù„Ø¹Ù…Ù„ Ø¨Ø§Ù‚Ø© ÙˆØ§Ø­Ø¯Ø©!');
                return;
            }

            gameState.money -= totalCost;
            
            gameState.supplies.fertilizer = document.getElementById('fertilizer').checked;
            gameState.supplies.ribbons = document.getElementById('ribbons').checked;
            gameState.supplies.cards = document.getElementById('cards').checked;

            for (let id in gameState.cart) {
                if (!gameState.inventory[id]) {
                    gameState.inventory[id] = 0;
                }
                gameState.inventory[id] += gameState.cart[id];
            }

            gameState.cart = {};
            flowers.forEach(flower => {
                document.getElementById(`flower-${flower.id}`).textContent = '0';
            });

            simulateSales();
        }

        function simulateSales() {
            let totalFlowers = 0;
            for (let id in gameState.inventory) {
                totalFlowers += gameState.inventory[id];
            }

            const maxBouquets = Math.floor(totalFlowers / 5);
            
            let qualityBonus = 1.0;
            if (gameState.supplies.fertilizer) qualityBonus *= 1.2;
            if (gameState.supplies.ribbons) qualityBonus *= 1.15;
            if (gameState.supplies.cards) qualityBonus *= 1.1;

            let arrangementBonus = 1.0;
            if (gameState.arrangement === 'wrapped') arrangementBonus = 1.2;
            else if (gameState.arrangement === 'vase') arrangementBonus = 1.4;
            else if (gameState.arrangement === 'premium') arrangementBonus = 1.6;

            const demandMod = gameState.season.multiplier;
            const potentialSales = Math.floor(maxBouquets * 0.75 * demandMod * qualityBonus);
            const actualSales = Math.min(potentialSales, maxBouquets);

            let basePrice = 25;
            if (gameState.arrangement === 'wrapped') basePrice = 30;
            else if (gameState.arrangement === 'vase') basePrice = 40;
            else if (gameState.arrangement === 'premium') basePrice = 55;

            const flowersUsed = actualSales * 5;
            let remaining = flowersUsed;
            for (let id in gameState.inventory) {
                const toRemove = Math.min(gameState.inventory[id], remaining);
                gameState.inventory[id] -= toRemove;
                remaining -= toRemove;
                if (remaining <= 0) break;
            }

            const revenue = actualSales * basePrice * arrangementBonus;
            const expenses = calculateTotalCost();
            const profit = revenue - expenses;

            gameState.money += revenue;
            gameState.totalBouquetsSold += actualSales;
            gameState.totalProfit += profit;

            if (qualityBonus > 1.3) {
                gameState.quality = Math.min(5.0, gameState.quality + 0.15);
            } else if (qualityBonus < 1.1) {
                gameState.quality = Math.max(3.0, gameState.quality - 0.1);
            }

            showResults(actualSales, revenue, expenses, profit);
        }

        function showResults(sold, revenue, expenses, profit) {
            document.getElementById('resultBouquets').textContent = sold;
            document.getElementById('resultRevenue').textContent = '$' + revenue.toFixed(2);
            document.getElementById('resultExpenses').textContent = '$' + expenses.toFixed(2);
            document.getElementById('resultProfit').textContent = '$' + profit.toFixed(2);
            document.getElementById('resultQuality').textContent = gameState.quality.toFixed(1) + ' â­';

            const profitElement = document.getElementById('resultProfit');
            profitElement.style.color = profit >= 0 ? '#28a745' : '#dc3545';

            document.getElementById('resultModal').classList.add('active');
        }

        function nextDay() {
            gameState.day++;
            document.getElementById('fertilizer').checked = false;
            document.getElementById('ribbons').checked = false;
            document.getElementById('cards').checked = false;
            setRandomSeason();
            document.getElementById('resultModal').classList.remove('active');
            updateDisplay();
        }

        function resetDay() {
            gameState.cart = {};
            gameState.arrangement = 'simple';
            
            document.getElementById('fertilizer').checked = false;
            document.getElementById('ribbons').checked = false;
            document.getElementById('cards').checked = false;

            document.querySelectorAll('.arrangement-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.type === 'simple') {
                    btn.classList.add('active');
                }
            });

            flowers.forEach(flower => {
                document.getElementById(`flower-${flower.id}`).textContent = '0';
            });

            updateDisplay();
        }

        function endGame() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©ØŸ')) {
                alert(`Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù†ØªÙ‡Øª!\n\nØ§Ù„Ø£ÙŠØ§Ù…: ${gameState.day}\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø¨Ø­: $${gameState.totalProfit.toFixed(2)}\nØ§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©: ${gameState.totalBouquetsSold}\nØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¬ÙˆØ¯Ø©: ${gameState.quality.toFixed(1)}`);
                location.reload();
            }
        }

        initGame();
    </script>
</body>
</html>
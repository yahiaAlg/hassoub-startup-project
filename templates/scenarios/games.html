{% extends "base.html" %}
{% load static %}

{% block title %}
    Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ÙˆØ§Ù„Ù…Ø­Ø§ÙƒØ§Ø©
{% endblock title %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/scenarios/games.css' %}" />
  <style>
        .play-button, .filter-tab {
            position: relative;
            overflow: hidden;
        }
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: scale(0);
            animation: rippleEffect 0.6s ease-out;
            pointer-events: none;
        }
        @keyframes rippleEffect {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
    </style>
{% endblock extra_css %}

{% block content %}
    <!-- Page Container -->
    <div class="page-container">
        <!-- Back Button -->
        <a href="{% url 'pages:index' %}" class="back-button">
            â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        </a>

        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">
                ğŸ®
                Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ÙˆØ§Ù„Ù…Ø­Ø§ÙƒØ§Ø©
            </h1>
            <p class="page-subtitle">ØªØ¹Ù„Ù… Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ø³ØªÙ…ØªØ§Ø¹!</p>
        </div>

        <!-- Filter Tabs -->
        <div class="filter-tabs">
            <button class="filter-tab active" onclick="filterGames('all')">
                ğŸ® Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨
            </button>
            <button class="filter-tab" onclick="filterGames('beginner')">
                ğŸŒ± Ù…Ø¨ØªØ¯Ø¦
            </button>
            <button class="filter-tab" onclick="filterGames('intermediate')">
                ğŸ“Š Ù…ØªÙˆØ³Ø·
            </button>
            <button class="filter-tab" onclick="filterGames('advanced')">
                ğŸ† Ù…ØªÙ‚Ø¯Ù…
            </button>
        </div>

        <!-- Business Scenario Games Section -->
        <section class="section">
            <div class="section-header">
                <span style="font-size: 2em;">ğŸ’¼</span>
                <div>
                    <h2 class="section-title">Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</h2>
                    <span class="section-subtitle">Ø§Ø¨Ø¯Ø£ Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø§Ù„Ø®Ø§Øµ ÙˆØªØ¹Ù„Ù… Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªØ¬Ø±Ø¨Ø©!</span>
                </div>
            </div>

            <div class="games-grid">
                {% for scenario in scenarios %}
                <div class="game-card">
                    <div class="game-badge badge-{{ scenario.difficulty }}">
                        {% if scenario.difficulty == 'easy' %}Ù…Ø¨ØªØ¯Ø¦
                        {% elif scenario.difficulty == 'medium' %}Ù…ØªÙˆØ³Ø·
                        {% elif scenario.difficulty == 'hard' %}Ù…ØªÙ‚Ø¯Ù…
                        {% endif %}
                    </div>
                    
                    <div class="game-header theme-{{ scenario.slug }}">
                        <span class="game-icon">{{ scenario.icon }}</span>
                    </div>
                    
                    <div class="game-content">
                        <h3 class="game-title">{{ scenario.title }}</h3>
                        <p class="game-description">
                            {{ scenario.description }}
                        </p>
                        
                        <div class="game-stats">
                            <div class="stat-item">
                                <span class="stat-icon">ğŸ’µ</span>
                                <span class="stat-value">${{ scenario.points_reward }}</span>
                                <span class="stat-label">Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-icon">â±ï¸</span>
                                <span class="stat-value">{{ scenario.duration }}</span>
                                <span class="stat-label">Ø¯Ù‚ÙŠÙ‚Ø©</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-icon">ğŸ‘¥</span>
                                <span class="stat-value">8-15</span>
                                <span class="stat-label">Ø³Ù†Ø©</span>
                            </div>
                        </div>
                        
                        <div class="game-footer">
                            <span class="difficulty-badge difficulty-{{ scenario.difficulty }}">
                                {{ scenario.get_difficulty_display }}
                            </span>
                            <button class="play-button" onclick="playGame('{{ scenario.slug }}.html')">
                                â–¶ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
                            </button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
    </div>
{% endblock content %}

{% block extra_js %}
    <script>
        // Play Game
        function playGame(gameFile) {
            console.log(`Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©: ${gameFile}`);
            window.location.href = gameFile;
        }

        // Filter Games
        function filterGames(category) {
            console.log(`ØªØµÙÙŠØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø­Ø³Ø¨: ${category}`);
            
            // Remove active class from all tabs
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            const cards = document.querySelectorAll('.game-card');
            
            cards.forEach(card => {
                const badge = card.querySelector('.game-badge');
                const badgeText = badge.textContent.toLowerCase();
                
                if (category === 'all') {
                    card.style.display = 'block';
                } else if (category === 'beginner' && badgeText.includes('Ù…Ø¨ØªØ¯Ø¦')) {
                    card.style.display = 'block';
                } else if (category === 'intermediate' && badgeText.includes('Ù…ØªÙˆØ³Ø·')) {
                    card.style.display = 'block';
                } else if (category === 'advanced' && badgeText.includes('Ù…ØªÙ‚Ø¯Ù…')) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Scroll Animation
        window.addEventListener('load', function() {
            console.log('%c ğŸ® Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨! ', 'color: #4caf50; font-size: 20px; font-weight: bold;');
            console.log('%c Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„Ø© Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ù…ØªØ¹Ø©! ğŸŒŸ', 'color: #ff9800; font-size: 14px;');

            // Intersection Observer for game cards
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.style.animation = 'fadeInUp 0.6s ease-out';
                            entry.target.style.opacity = '1';
                        }, index * 100);
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.game-card').forEach(card => {
                card.style.opacity = '0';
                observer.observe(card);
            });
        });

        // Add ripple effect to buttons
        document.querySelectorAll('.play-button, .filter-tab').forEach(button => {
            button.addEventListener('click', function(e) {
                const ripple = document.createElement('span');
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;
                
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = x + 'px';
                ripple.style.top = y + 'px';
                ripple.classList.add('ripple');
                
                this.appendChild(ripple);
                
                setTimeout(() => ripple.remove(), 600);
            });
        });

        // Add ripple CSS
        const style = document.createElement('style');
        style.textContent = `
            .play-button, .filter-tab {
                position: relative;
                overflow: hidden;
            }
            .ripple {
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.5);
                transform: scale(0);
                animation: rippleEffect 0.6s ease-out;
                pointer-events: none;
            }
            @keyframes rippleEffect {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
{% endblock extra_js %}